<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='linenumber'>  1</span> <span class="COMM">// $Id: PreferenceManagerView.js 174 2008-08-28 10:47:56Z bobbicat71 $</span><span class="WHIT">
<span class='linenumber'>  2</span> 
<span class='linenumber'>  3</span> </span><span class="NAME">Ext.namespace</span><span class="PUNC">(</span><span class="STRN">'Ext.ux.netbox'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  4</span> 
<span class='linenumber'>  5</span> </span><span class="COMM">/** Creates a new PreferenceManagerView. It takes as input a config object, usefull to config this component.
<span class='linenumber'>  6</span>   * The only mandatory attribute added is PreferenceManager.
<span class='linenumber'>  7</span>   * @constructor
<span class='linenumber'>  8</span>   * @extends Ext.menu.Menu
<span class='linenumber'>  9</span>   * @param {Object} config
<span class='linenumber'> 10</span>   * @config {Ext.ux.netbox.PreferenceManager} preferenceManager The mandatory preference manager
<span class='linenumber'> 11</span>   * @config {boolean} defaultErrorHandling True to delagate error management to the view, that simply shows the response text in a dialog. false to manage the errors on its own. Optional, default: true.
<span class='linenumber'> 12</span>   * @class This class is a view to show the preferences managed by a preference manager. The ui is similar to the bookmark one used by browser
<span class='linenumber'> 13</span>   * &lt;h4> Example &lt;/h4>
<span class='linenumber'> 14</span>   * &lt;pre>
<span class='linenumber'> 15</span>   * //toolbar is a standard Ext.Toolbar
<span class='linenumber'> 16</span>   * var prefManagView = new Ext.ux.netbox.PreferenceManagerView({preferenceManager: prefManager});
<span class='linenumber'> 17</span>   * toolbar.add({text: 'Preference', menu: prefManagView});
<span class='linenumber'> 18</span>   * &lt;/pre>
<span class='linenumber'> 19</span>   */</span><span class="WHIT">
<span class='linenumber'> 20</span> </span><span class="NAME">Ext.ux.netbox.PreferenceManagerView</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 21</span> 
<span class='linenumber'> 22</span>   </span><span class="NAME">Ext.QuickTips.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 23</span> 
<span class='linenumber'> 24</span>   </span><span class="NAME">this.preferenceManager</span><span class="PUNC">=</span><span class="NAME">config.preferenceManager</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 25</span>   </span><span class="NAME">Ext.ux.netbox.PreferenceManagerView.superclass.constructor.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 26</span>   </span><span class="NAME">this.preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"preferenceSaved"</span><span class="PUNC">,</span><span class="NAME">this.onPreferenceSaved</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 27</span>   </span><span class="NAME">this.preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"preferenceDeleted"</span><span class="PUNC">,</span><span class="NAME">this.onPreferenceDeleted</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 28</span>   </span><span class="NAME">this.preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"loadPreferencesFailed"</span><span class="PUNC">,</span><span class="NAME">this.resetMenu</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 29</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">config.defaultErrorHandling</span><span class="PUNC">===</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">config.defaultErrorHandling</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 30</span>     </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.DefaultPreferenceManagerErrorManager</span><span class="PUNC">(</span><span class="NAME">this.preferenceManager</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 31</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 32</span> 
<span class='linenumber'> 33</span>   </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">'show'</span><span class="PUNC">,</span><span class="NAME">this.loadRemotePref</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">single</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 34</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 35</span> 
<span class='linenumber'> 36</span> </span><span class="NAME">Ext.extend</span><span class="PUNC">(</span><span class="NAME">Ext.ux.netbox.PreferenceManagerView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Ext.menu.Menu</span><span class="PUNC">,</span><span class="COMM">/** @scope Ext.ux.netbox.PreferenceManagerView.prototype */</span><span class="WHIT">
<span class='linenumber'> 37</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 38</span>   </span><span class="NAME">addText</span><span class="WHIT">           </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Add preference'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 39</span>   </span><span class="NAME">addTooltipText</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Save the actual configuration'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 40</span>   </span><span class="NAME">manageText</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Manage preferences'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 41</span>   </span><span class="NAME">manageTooltipText</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Manage the saved configurations'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 42</span>   </span><span class="NAME">okText</span><span class="WHIT">            </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'OK'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 43</span>   </span><span class="NAME">cancelText</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Cancel'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 44</span>   </span><span class="NAME">modifyText</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Modify preference'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 45</span>   </span><span class="NAME">modifyBtnText</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Modify'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 46</span>   </span><span class="NAME">deleteBtnText</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Delete'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 47</span>   </span><span class="NAME">closeBtnText</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Close'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 48</span>   </span><span class="NAME">nameText</span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Name'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 49</span>   </span><span class="NAME">descText</span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Description'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 50</span>   </span><span class="NAME">defaultText</span><span class="WHIT">       </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Default'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 51</span>   </span><span class="NAME">loadingText</span><span class="WHIT">       </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Loading...'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 52</span> 
<span class='linenumber'> 53</span>   </span><span class="COMM">/** loadRemotePref loading preferences from remote server
<span class='linenumber'> 54</span>     * @private
<span class='linenumber'> 55</span>     */</span><span class="WHIT">
<span class='linenumber'> 56</span>   </span><span class="NAME">loadRemotePref</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 57</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.prefStore</span><span class="PUNC">===</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 58</span>       </span><span class="NAME">this.prefStore</span><span class="PUNC">=</span><span class="NAME">this.preferenceManager.getAllPreferences</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 59</span>       </span><span class="NAME">this.prefStore.on</span><span class="PUNC">(</span><span class="STRN">'load'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.loadRemotePrefAsync</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 60</span>       </span><span class="NAME">this.prefStore.on</span><span class="PUNC">(</span><span class="STRN">'beforeload'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.beforeLoad</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 61</span>       </span><span class="NAME">this.createStableItems</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 62</span>     </span><span class="PUNC">}</span><span class="WHIT"> 
<span class='linenumber'> 63</span>     </span><span class="NAME">this.prefStore.load</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 64</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 65</span>   
<span class='linenumber'> 66</span>   </span><span class="NAME">createStableItems</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 67</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.items.getCount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 68</span>       </span><span class="NAME">this.add</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'> 69</span>         </span><span class="PUNC">{</span><span class="NAME">text</span><span class="PUNC">:</span><span class="NAME">this.addText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">this.addTooltipText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="NAME">this.addPreference</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 70</span>         </span><span class="PUNC">{</span><span class="NAME">text</span><span class="PUNC">:</span><span class="NAME">this.manageText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">this.manageTooltipText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="NAME">this.showManageDialog</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 71</span>         </span><span class="STRN">'-'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 72</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 73</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 74</span> 
<span class='linenumber'> 75</span>   </span><span class="NAME">beforeLoad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 76</span>     </span><span class="NAME">this.resetMenu</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 77</span>     </span><span class="NAME">this.getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">mask</span><span class="PUNC">(</span><span class="NAME">this.loadingText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 78</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 79</span>   
<span class='linenumber'> 80</span>   </span><span class="NAME">resetMenu</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 81</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 82</span>       </span><span class="NAME">this.getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unmask</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 83</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.items.getCount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 84</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.items.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removable</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 85</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.items.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.items.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">isMasked</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 86</span>           </span><span class="NAME">this.items.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unmask</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 87</span>         </span><span class="NAME">this.remove</span><span class="PUNC">(</span><span class="NAME">this.items.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 88</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 89</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 90</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 91</span> 
<span class='linenumber'> 92</span>   </span><span class="COMM">/** loadRemotePrefAsync
<span class='linenumber'> 93</span>     * @private
<span class='linenumber'> 94</span>     */</span><span class="WHIT">
<span class='linenumber'> 95</span>   </span><span class="NAME">loadRemotePrefAsync</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 96</span>     </span><span class="NAME">this.resetMenu</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 97</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.prefStore.getTotalCount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 98</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rec</span><span class="PUNC">=</span><span class="NAME">this.prefStore.getAt</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 99</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">iconCls</span><span class="PUNC">=</span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>100</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">rec.get</span><span class="PUNC">(</span><span class="STRN">'isDefault'</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>101</span>         </span><span class="NAME">iconCls</span><span class="PUNC">=</span><span class="STRN">'x-icon-checked'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>102</span>       </span><span class="NAME">this.add</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>103</span>         </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="NAME">rec.get</span><span class="PUNC">(</span><span class="STRN">'prefId'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>104</span>         </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="NAME">rec.get</span><span class="PUNC">(</span><span class="STRN">'prefName'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>105</span>         </span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">rec.get</span><span class="PUNC">(</span><span class="STRN">'prefDesc'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>106</span>         </span><span class="NAME">iconCls</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">iconCls</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>107</span>         </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.applyPreference</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>108</span>         </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>109</span>         </span><span class="NAME">removable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>110</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>111</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>112</span> 
<span class='linenumber'>113</span>   </span><span class="COMM">/** addPreference Opens dialog for save the preference
<span class='linenumber'>114</span>     * @private
<span class='linenumber'>115</span>     */</span><span class="WHIT">
<span class='linenumber'>116</span>   </span><span class="NAME">addPreference</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>117</span>     </span><span class="NAME">this.showAddDialog</span><span class="PUNC">(</span><span class="STRN">''</span><span class="PUNC">,</span><span class="STRN">''</span><span class="PUNC">,</span><span class="STRN">''</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>118</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>119</span> 
<span class='linenumber'>120</span>   </span><span class="COMM">/** managePreference Opens dialog for modify the preference
<span class='linenumber'>121</span>     * @private
<span class='linenumber'>122</span>     */</span><span class="WHIT">
<span class='linenumber'>123</span>   </span><span class="NAME">managePreference</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>124</span>     </span><span class="NAME">selModel</span><span class="PUNC">=</span><span class="NAME">this.manageGridPanel.getSelectionModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>125</span>     </span><span class="NAME">record</span><span class="PUNC">=</span><span class="NAME">selModel.getSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>126</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">record</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>127</span>       </span><span class="NAME">this.showAddDialog</span><span class="PUNC">(</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'prefId'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'prefName'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'prefDesc'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'isDefault'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>128</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>129</span> 
<span class='linenumber'>130</span>   </span><span class="COMM">/** deletePreferences Method for delete the selected preferences
<span class='linenumber'>131</span>     * @private
<span class='linenumber'>132</span>     */</span><span class="WHIT">
<span class='linenumber'>133</span>   </span><span class="NAME">deletePreferences</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>134</span>     </span><span class="NAME">selModel</span><span class="PUNC">=</span><span class="NAME">this.manageGridPanel.getSelectionModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>135</span>     </span><span class="NAME">records</span><span class="PUNC">=</span><span class="NAME">selModel.getSelections</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>136</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">records.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>137</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prefIdArray</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>138</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">records.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>139</span>         </span><span class="NAME">prefIdArray.push</span><span class="PUNC">(</span><span class="NAME">records</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">'prefId'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>140</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>141</span>       </span><span class="NAME">this.preferenceManager.deletePreferences</span><span class="PUNC">(</span><span class="NAME">prefIdArray</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>142</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>143</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>144</span>   
<span class='linenumber'>145</span>   </span><span class="COMM">/** showAddDialog Create dialog for add or modify the preference
<span class='linenumber'>146</span>     * @private
<span class='linenumber'>147</span>     */</span><span class="WHIT">
<span class='linenumber'>148</span>   </span><span class="NAME">showAddDialog</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">prefId</span><span class="PUNC">,</span><span class="NAME">prefName</span><span class="PUNC">,</span><span class="NAME">prefDesc</span><span class="PUNC">,</span><span class="NAME">isDefault</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>149</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.addDialog</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>150</span>       </span><span class="NAME">this.addDialog</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.Window</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>151</span>         </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="NUMB">400</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>152</span>         </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="NUMB">160</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>153</span>         </span><span class="NAME">minWidth</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="NUMB">400</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>154</span>         </span><span class="NAME">minHeight</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="NUMB">160</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>155</span>         </span><span class="NAME">closeAction</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'hide'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>156</span>         </span><span class="NAME">layout</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'fit'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>157</span>         </span><span class="NAME">plain</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>158</span>         </span><span class="NAME">modal</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>159</span>         </span><span class="NAME">shadow</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>160</span> 
<span class='linenumber'>161</span>         </span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.addForm</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.form.FormPanel</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>162</span>           </span><span class="NAME">labelWidth</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">75</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>163</span>           </span><span class="NAME">border</span><span class="PUNC">:</span><span class="WHIT">     </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>164</span>           </span><span class="NAME">bodyStyle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'background-color:transparent;padding:10px; '</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>165</span>           </span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>166</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT">         </span><span class="STRN">'prefId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>167</span>               </span><span class="NAME">xtype</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'hidden'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>168</span>               </span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">'prefId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>169</span>               </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="NAME">prefId</span><span class="WHIT">
<span class='linenumber'>170</span>             </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>171</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT">         </span><span class="STRN">'prefName'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>172</span>               </span><span class="NAME">xtype</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'textfield'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>173</span>               </span><span class="NAME">fieldLabel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.nameText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>174</span>               </span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">'prefName'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>175</span>               </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="NAME">prefName</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>176</span>               </span><span class="NAME">allowBlank</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>177</span>               </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'96%'</span><span class="WHIT">
<span class='linenumber'>178</span>             </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>179</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT">         </span><span class="STRN">'prefDesc'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>180</span>               </span><span class="NAME">xtype</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'textfield'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>181</span>               </span><span class="NAME">fieldLabel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.descText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>182</span>               </span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">'prefDesc'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>183</span>               </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="NAME">prefDesc</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>184</span>               </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'96%'</span><span class="WHIT">
<span class='linenumber'>185</span>             </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>186</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT">         </span><span class="STRN">'isDefault'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>187</span>               </span><span class="NAME">xtype</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'checkbox'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>188</span>               </span><span class="NAME">fieldLabel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.defaultText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>189</span>               </span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">'isDefault'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>190</span>               </span><span class="NAME">checked</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="NAME">isDefault</span><span class="WHIT">
<span class='linenumber'>191</span>           </span><span class="PUNC">}</span><span class="PUNC">]</span><span class="WHIT">
<span class='linenumber'>192</span>         </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>193</span> 
<span class='linenumber'>194</span>         </span><span class="NAME">buttons</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>195</span>           </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="NAME">this.okText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>196</span>           </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.savePreference</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>197</span>           </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>198</span>         </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>199</span>           </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="NAME">this.cancelText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>200</span>           </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.addDialog.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>201</span>           </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>202</span>         </span><span class="PUNC">}</span><span class="PUNC">]</span><span class="WHIT">
<span class='linenumber'>203</span>       </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>204</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>205</span>       </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'prefId'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">prefId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>206</span>       </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'prefName'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">prefName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>207</span>       </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'prefDesc'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">prefDesc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>208</span>       </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'isDefault'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">isDefault</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>209</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>210</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">prefId</span><span class="PUNC">!=</span><span class="STRN">''</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>211</span>       </span><span class="NAME">this.addDialog.setTitle</span><span class="PUNC">(</span><span class="NAME">this.modifyText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>212</span>     </span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>213</span>       </span><span class="NAME">this.addDialog.setTitle</span><span class="PUNC">(</span><span class="NAME">this.addText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>214</span>     </span><span class="COMM">//this.addForm.findById('prefName').focus();</span><span class="WHIT">
<span class='linenumber'>215</span>     </span><span class="NAME">this.addDialog.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>216</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>217</span> 
<span class='linenumber'>218</span>   </span><span class="COMM">/** showManageDialog Create dialog for manage the preferences
<span class='linenumber'>219</span>     * @private
<span class='linenumber'>220</span>     */</span><span class="WHIT">
<span class='linenumber'>221</span>   </span><span class="NAME">showManageDialog</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>222</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.manageDialog</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>223</span>       </span><span class="NAME">this.manageDialog</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.Window</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>224</span>         </span><span class="NAME">title</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="NAME">this.manageText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>225</span>         </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="NUMB">600</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>226</span>         </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="NUMB">300</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>227</span>         </span><span class="NAME">minWidth</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="NUMB">500</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>228</span>         </span><span class="NAME">minHeight</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="NUMB">250</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>229</span>         </span><span class="NAME">closeAction</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'hide'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>230</span>         </span><span class="NAME">layout</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">'fit'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>231</span>         </span><span class="NAME">plain</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>232</span>         </span><span class="NAME">modal</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>233</span>         </span><span class="NAME">shadow</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>234</span> 
<span class='linenumber'>235</span>         </span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.manageGridPanel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.grid.GridPanel</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>236</span>           </span><span class="NAME">store</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="NAME">this.prefStore</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>237</span>           </span><span class="NAME">border</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>238</span>           </span><span class="NAME">enableColumnHide</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>239</span>           </span><span class="NAME">columns</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>240</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'prefId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>241</span>               </span><span class="NAME">hidden</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>242</span>               </span><span class="NAME">dataIndex</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'prefId'</span><span class="WHIT">
<span class='linenumber'>243</span>             </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>244</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="STRN">'prefName'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>245</span>               </span><span class="NAME">header</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.nameText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>246</span>               </span><span class="NAME">sortable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>247</span>               </span><span class="NAME">dataIndex</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'prefName'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>248</span>               </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">200</span><span class="WHIT">
<span class='linenumber'>249</span>             </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>250</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="STRN">'prefDesc'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>251</span>               </span><span class="NAME">header</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.descText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>252</span>               </span><span class="NAME">sortable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>253</span>               </span><span class="NAME">dataIndex</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'prefDesc'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>254</span>               </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">330</span><span class="WHIT">
<span class='linenumber'>255</span>             </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>256</span>               </span><span class="NAME">id</span><span class="PUNC">:</span><span class="STRN">'isDefault'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>257</span>               </span><span class="NAME">header</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.defaultText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>258</span>               </span><span class="NAME">sortable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>259</span>               </span><span class="NAME">dataIndex</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'isDefault'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>260</span>               </span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">60</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>261</span>               </span><span class="NAME">renderer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.imageRenderer</span><span class="WHIT">
<span class='linenumber'>262</span>             </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>263</span>           </span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>264</span> 
<span class='linenumber'>265</span>           </span><span class="NAME">viewConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>266</span>               </span><span class="NAME">forceFit</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT">
<span class='linenumber'>267</span>           </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>268</span> 
<span class='linenumber'>269</span>           </span><span class="NAME">tbar</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>270</span>               </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.modifyBtnText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>271</span>               </span><span class="NAME">cls</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="STRN">'x-btn-text-icon'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>272</span>               </span><span class="NAME">iconCls</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'x-icon-modify'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>273</span>               </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.managePreference</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>274</span>               </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>275</span>           </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'-'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>276</span>               </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.deleteBtnText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>277</span>               </span><span class="NAME">cls</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="STRN">'x-btn-text-icon'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>278</span>               </span><span class="NAME">iconCls</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'x-icon-delete'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>279</span>               </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.deletePreferences</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>280</span>               </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>281</span>           </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'-'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>282</span>               </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.closeBtnText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>283</span>               </span><span class="NAME">cls</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="STRN">'x-btn-text-icon'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>284</span>               </span><span class="NAME">iconCls</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'x-icon-cancel'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>285</span>               </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.manageDialog.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>286</span>               </span><span class="NAME">scope</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>287</span>           </span><span class="PUNC">}</span><span class="PUNC">]</span><span class="WHIT">
<span class='linenumber'>288</span>         </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>289</span>       </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>290</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>291</span>     </span><span class="NAME">this.manageDialog.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>292</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>293</span> 
<span class='linenumber'>294</span>   </span><span class="COMM">/** imageRenderer
<span class='linenumber'>295</span>     * @private
<span class='linenumber'>296</span>     */</span><span class="WHIT">
<span class='linenumber'>297</span>   </span><span class="NAME">imageRenderer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">metadata</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>298</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">==</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>299</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="STRN">'&lt;img class="x-menu-item-icon x-icon-checked" src="'</span><span class="PUNC">+</span><span class="NAME">Ext.BLANK_IMAGE_URL</span><span class="PUNC">+</span><span class="STRN">'"/>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>300</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>301</span> 
<span class='linenumber'>302</span>   </span><span class="COMM">/** applyPreference setting preference
<span class='linenumber'>303</span>     * @private
<span class='linenumber'>304</span>     */</span><span class="WHIT">
<span class='linenumber'>305</span>   </span><span class="NAME">applyPreference</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">item</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">event</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>306</span>     </span><span class="NAME">this.preferenceManager.applyPreference</span><span class="PUNC">(</span><span class="NAME">item.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>307</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>308</span> 
<span class='linenumber'>309</span>   </span><span class="COMM">/** savePreference saving preference
<span class='linenumber'>310</span>     * @private
<span class='linenumber'>311</span>     */</span><span class="WHIT">
<span class='linenumber'>312</span>   </span><span class="NAME">savePreference</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>313</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prefId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'prefId'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>314</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prefName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'prefName'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>315</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prefDesc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'prefDesc'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>316</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.addForm.findById</span><span class="PUNC">(</span><span class="STRN">'isDefault'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>317</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prefName.isValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>318</span>       </span><span class="NAME">this.preferenceManager.savePreference</span><span class="PUNC">(</span><span class="NAME">prefId.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">prefName.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">prefDesc.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">isDefault.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>319</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>320</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>321</span> 
<span class='linenumber'>322</span>   </span><span class="COMM">/** onPreferenceSaved
<span class='linenumber'>323</span>     * @private
<span class='linenumber'>324</span>     */</span><span class="WHIT">
<span class='linenumber'>325</span>   </span><span class="NAME">onPreferenceSaved</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">prefName</span><span class="PUNC">,</span><span class="NAME">response</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>326</span>     </span><span class="NAME">this.prefStore.reload</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>327</span>     </span><span class="NAME">this.addDialog.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>328</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>329</span> 
<span class='linenumber'>330</span>   </span><span class="COMM">/** onPreferenceDeleted
<span class='linenumber'>331</span>     * @private
<span class='linenumber'>332</span>     */</span><span class="WHIT">
<span class='linenumber'>333</span>   </span><span class="NAME">onPreferenceDeleted</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">prefIdArray</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>334</span>     </span><span class="NAME">this.prefStore.reload</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>335</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>336</span> 
<span class='linenumber'>337</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>338</span> 
<span class='linenumber'>339</span> </span><span class="COMM">/** This one is needed to allow tooltip for Menu Items
<span class='linenumber'>340</span>   */</span><span class="WHIT">
<span class='linenumber'>341</span> </span><span class="NAME">Ext.menu.BaseItem.prototype.onRender</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">container</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>342</span>   </span><span class="NAME">this.el</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Ext.get</span><span class="PUNC">(</span><span class="NAME">this.el</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span>   </span><span class="NAME">container.dom.appendChild</span><span class="PUNC">(</span><span class="NAME">this.el.dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>344</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.tooltip</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>345</span>    </span><span class="NAME">this.el.dom.qtip</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.tooltip</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>346</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>347</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>348</span> 
<span class='linenumber'>349</span> </span><span class="COMM">/** Build a new DefaultPreferenceManagerErrorManager
<span class='linenumber'>350</span>   * @constructor
<span class='linenumber'>351</span>   * @param {Ext.ux.netbox.PreferenceManager} preferenceManager The preferenceManager whose errors this class manage
<span class='linenumber'>352</span>   * @class This class manages the errors of a preferencesManager by listening to the error events (see the documentation of PreferenceManager, and look at the evants that ends by failed)
<span class='linenumber'>353</span>   * It shows an error dialog containing the content of the response sent by the server 
<span class='linenumber'>354</span>   */</span><span class="WHIT">
<span class='linenumber'>355</span> </span><span class="NAME">Ext.ux.netbox.DefaultPreferenceManagerErrorManager</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">preferenceManager</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>356</span>   </span><span class="NAME">preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"applyDefaultPreferenceFailed"</span><span class="PUNC">,</span><span class="NAME">this.manageApplyDefaultPreferenceFailed</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>357</span>   </span><span class="NAME">preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"applyPreferenceFailed"</span><span class="PUNC">,</span><span class="NAME">this.manageApplyPreferenceFailed</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>358</span>   </span><span class="NAME">preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"loadPreferencesFailed"</span><span class="PUNC">,</span><span class="NAME">this.manageLoadPreferencesFailed</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>359</span>   </span><span class="NAME">preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"preferenceDeleteFailed"</span><span class="PUNC">,</span><span class="NAME">this.manageDeletePreferencesFailed</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>360</span>   </span><span class="NAME">preferenceManager.on</span><span class="PUNC">(</span><span class="STRN">"preferenceSaveFailed"</span><span class="PUNC">,</span><span class="NAME">this.manageSavePreferenceFailed</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>361</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>362</span> 
<span class='linenumber'>363</span> </span><span class="NAME">Ext.ux.netbox.DefaultPreferenceManagerErrorManager.prototype</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>364</span>   </span><span class="COMM">/** Title of the error dialog when an error occurs while applying the default preference
<span class='linenumber'>365</span>     * @type String
<span class='linenumber'>366</span>     */</span><span class="WHIT">
<span class='linenumber'>367</span>   </span><span class="NAME">failedToApplyDefaultPreferenceTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Error applying default preference"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>368</span>   </span><span class="COMM">/** Title of the error dialog when an error occurs while applying a preference
<span class='linenumber'>369</span>     * @type String
<span class='linenumber'>370</span>     */</span><span class="WHIT">
<span class='linenumber'>371</span>   </span><span class="NAME">failedToApplyPreferenceTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Error applying preference"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>372</span>   </span><span class="COMM">/** Title of the error dialog when an error occurs while saving a preference
<span class='linenumber'>373</span>     * @type String
<span class='linenumber'>374</span>     */</span><span class="WHIT">
<span class='linenumber'>375</span>   </span><span class="NAME">failedToSavePreferenceTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Error saving preference"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>376</span>   </span><span class="COMM">/** Title of the error dialog when an error occurs while deleting some preferences
<span class='linenumber'>377</span>     * @type String
<span class='linenumber'>378</span>     */</span><span class="WHIT">
<span class='linenumber'>379</span>   </span><span class="NAME">failedToDeletePreferenceTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Error deleting preference(s)"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>380</span>   </span><span class="COMM">/** Title of the error dialog when an error occurs while loading the preferences
<span class='linenumber'>381</span>     * @type String
<span class='linenumber'>382</span>     */</span><span class="WHIT">
<span class='linenumber'>383</span>   </span><span class="NAME">failedToLoadPreferenceTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Error loading preferences"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>384</span>   </span><span class="COMM">/** Callback of the applyDefaultPreferenceFailed event
<span class='linenumber'>385</span>     * @private
<span class='linenumber'>386</span>     * @ignore
<span class='linenumber'>387</span>     */</span><span class="WHIT">
<span class='linenumber'>388</span>   </span><span class="NAME">manageApplyDefaultPreferenceFailed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">response</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>389</span>     </span><span class="NAME">this.manageError</span><span class="PUNC">(</span><span class="NAME">this.failedToApplyDefaultPreferenceTitle</span><span class="PUNC">,</span><span class="NAME">response.responseText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>390</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>391</span>   </span><span class="COMM">/** Callback of the applyPreferenceFailed event
<span class='linenumber'>392</span>     * @private
<span class='linenumber'>393</span>     * @ignore
<span class='linenumber'>394</span>     */</span><span class="WHIT">
<span class='linenumber'>395</span>   </span><span class="NAME">manageApplyPreferenceFailed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">prefId</span><span class="PUNC">,</span><span class="NAME">response</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>396</span>     </span><span class="NAME">this.manageError</span><span class="PUNC">(</span><span class="NAME">this.failedToApplyPreferenceTitle</span><span class="PUNC">,</span><span class="NAME">response.responseText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>397</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>398</span>   </span><span class="COMM">/** Callback of the preferenceSaveFailed event
<span class='linenumber'>399</span>     * @private
<span class='linenumber'>400</span>     * @ignore
<span class='linenumber'>401</span>     */</span><span class="WHIT">  
<span class='linenumber'>402</span>   </span><span class="NAME">manageSavePreferenceFailed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">prefId</span><span class="PUNC">,</span><span class="NAME">prefName</span><span class="PUNC">,</span><span class="NAME">response</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>403</span>     </span><span class="NAME">this.manageError</span><span class="PUNC">(</span><span class="NAME">this.failedToSavePreferenceTitle</span><span class="PUNC">,</span><span class="NAME">response.responseText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>404</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>405</span>   </span><span class="COMM">/** Callback of the preferenceDeleteFailed event
<span class='linenumber'>406</span>     * @private
<span class='linenumber'>407</span>     * @ignore
<span class='linenumber'>408</span>     */</span><span class="WHIT">  
<span class='linenumber'>409</span>   </span><span class="NAME">manageDeletePreferencesFailed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">prefIdsArray</span><span class="PUNC">,</span><span class="NAME">response</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>410</span>     </span><span class="NAME">this.manageError</span><span class="PUNC">(</span><span class="NAME">this.failedToDeletePreferenceTitle</span><span class="PUNC">,</span><span class="NAME">response.responseText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>411</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>412</span>   </span><span class="COMM">/** Callback of the loadPreferencesFailed event
<span class='linenumber'>413</span>     * @private
<span class='linenumber'>414</span>     * @ignore
<span class='linenumber'>415</span>     */</span><span class="WHIT">  
<span class='linenumber'>416</span>   </span><span class="NAME">manageLoadPreferencesFailed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">response</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>417</span>     </span><span class="NAME">this.manageError</span><span class="PUNC">(</span><span class="NAME">this.failedToLoadPreferenceTitle</span><span class="PUNC">,</span><span class="NAME">response.responseText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>418</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>419</span>   </span><span class="COMM">/** This method has as input the title of the dialog and the content of the response
<span class='linenumber'>420</span>     * It shows a dialog with title as title and message as content.
<span class='linenumber'>421</span>     * If you want to personalize the dialog or the behaviour just overwrite this method
<span class='linenumber'>422</span>     * @param {String} title The title of the dialog
<span class='linenumber'>423</span>     * @param {String} message The content of the dialog
<span class='linenumber'>424</span>     */</span><span class="WHIT">
<span class='linenumber'>425</span>   </span><span class="NAME">manageError</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">title</span><span class="PUNC">,</span><span class="NAME">message</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>426</span>     </span><span class="NAME">Ext.MessageBox.show</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>427</span>            </span><span class="NAME">title</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">title</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>428</span>            </span><span class="NAME">msg</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>429</span>            </span><span class="NAME">buttons</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">Ext.MessageBox.OK</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>430</span>            </span><span class="NAME">icon</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">Ext.MessageBox.ERROR</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>431</span>            </span><span class="NAME">minWidth</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">200</span><span class="WHIT">
<span class='linenumber'>432</span>        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>433</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>434</span> </span><span class="PUNC">}</span><span class="PUNC">;</span></pre></body></html>