<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='linenumber'>  1</span> <span class="COMM">// $Id: StaticFilterModelView.js 192 2008-10-07 12:48:51Z dandfra $</span><span class="WHIT">
<span class='linenumber'>  2</span> 
<span class='linenumber'>  3</span> </span><span class="NAME">String.prototype.escHtml</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT"> 
<span class='linenumber'>  4</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="STRN">'&'</span><span class="PUNC">:</span><span class="STRN">'&amp;'</span><span class="PUNC">,</span><span class="STRN">'&lt;'</span><span class="PUNC">:</span><span class="STRN">'&lt;'</span><span class="PUNC">,</span><span class="STRN">'>'</span><span class="PUNC">:</span><span class="STRN">'&gt;'</span><span class="PUNC">,</span><span class="STRN">'"'</span><span class="PUNC">:</span><span class="STRN">'&quot;'</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  5</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  6</span>   </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> 
<span class='linenumber'>  7</span>     </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t.replace</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">RegExp</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="STRN">'g'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>  8</span>   </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='linenumber'>  9</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 10</span> 
<span class='linenumber'> 11</span> </span><span class="NAME">Ext.namespace</span><span class="PUNC">(</span><span class="STRN">'Ext.ux.netbox.core'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 12</span> 
<span class='linenumber'> 13</span> </span><span class="COMM">/** It creates a new StaticFilterModelView.
<span class='linenumber'> 14</span>   * @class In this view for each available field there is a label, and an operator combo and space where the widget to edits the values will appear. Something like this:
<span class='linenumber'> 15</span>   * &lt;pre>
<span class='linenumber'> 16</span>   *        +----------------+--+ +----------------+
<span class='linenumber'> 17</span>   * field: |contains        |\/| | ciccio         |
<span class='linenumber'> 18</span>   *        +----------------+--+ +----------------+
<span class='linenumber'> 19</span>   * &lt;/pre>
<span class='linenumber'> 20</span>   * There are some config options to manage the way the fields are put together. For example you can divide the fields in column, you can decide where to put the label and so on.
<span class='linenumber'> 21</span>   * This view supports lazy initialization using staticFilter as xtype.
<span class='linenumber'> 22</span>   * &lt;h4> Example &lt;/h4>
<span class='linenumber'> 23</span>   * We are creating a static filter panel where the fields are arranged in 3 columns, the label are on the top of the operation field,
<span class='linenumber'> 24</span>   * the operation field will use 33% of the space in te column, and each filter 46 pixels as height
<span class='linenumber'> 25</span>   * &lt;PRE>
<span class='linenumber'> 26</span>   * var viewport = new Ext.Viewport({
<span class='linenumber'> 27</span>   *   layout: "border",
<span class='linenumber'> 28</span>   *   items: [{
<span class='linenumber'> 29</span>   *     filterModel: filterModel,
<span class='linenumber'> 30</span>   *     colsNumber:3,
<span class='linenumber'> 31</span>   *     labelWidth: 55,
<span class='linenumber'> 32</span>   *     labelAlign: 'top',
<span class='linenumber'> 33</span>   *     rowSize: 46,
<span class='linenumber'> 34</span>   *     ratio: 33,
<span class='linenumber'> 35</span>   *     labelPad: 1,
<span class='linenumber'> 36</span>   *     region: "north",
<span class='linenumber'> 37</span>   *     height:150,
<span class='linenumber'> 38</span>   *     xtype: 'staticFilter',
<span class='linenumber'> 39</span>   *     itemCls: 'filter'
<span class='linenumber'> 40</span>   *   },
<span class='linenumber'> 41</span>   *   grid
<span class='linenumber'> 42</span>   * ]});
<span class='linenumber'> 43</span>   * &lt;/pre>
<span class='linenumber'> 44</span>   * &lt;B>NB1:&lt;/B> This view only supports an elementary filter  for a field. If you use this view you must be sure that this basic assumption is verified&lt;BR>
<span class='linenumber'> 45</span>   * &lt;B>NB2:&lt;/B> The items config options will be overwritten&lt;br>
<span class='linenumber'> 46</span>   * @constructor
<span class='linenumber'> 47</span>   * @param {Object} config Configuration options
<span class='linenumber'> 48</span>   * @config {Ext.ux.netbox.core.FilterModel}filterModel the filterModel whose filters must be showed
<span class='linenumber'> 49</span>   * @config {int} colNumbers the number of columns in which the filters must be disposed. The default is 1
<span class='linenumber'> 50</span>   * @config {int} labelWidth The width of the label containing the name of the column. See Ext.layout.FormLayout.labelWidth config option for more details (including the default value)
<span class='linenumber'> 51</span>   * @config {boolean} hideLabels true to hide the label containing the name of the column. See Ext.layout.FormLayout.hideLabels config option for more details (including the default value)
<span class='linenumber'> 52</span>   * @config {String} itemCls class to apply to the label containing the name of the column. See Ext.layout.FormLayout.itemCls config option for more details
<span class='linenumber'> 53</span>   * @config {String}labelAlign allignment of the label containing the name of the column. See Ext.layout.FormLayout.itemCls config option for more details
<span class='linenumber'> 54</span>   * @config {int} labelPad padding of the label containing the name of the column. See Ext.layout.FormLayout.itemCls config option for more details
<span class='linenumber'> 55</span>   * @config {int} rowSize the height of the "row" consisting of operator combo + editor value. The default is 27 pixel
<span class='linenumber'> 56</span>   * @config {int} ratio a number between 1 and 99, the percentage of the space to give to label + combo with the operators. The default is 60
<span class='linenumber'> 57</span>   * @extends Ext.form.FormPanel
<span class='linenumber'> 58</span>   */</span><span class="WHIT">
<span class='linenumber'> 59</span> </span><span class="NAME">Ext.ux.netbox.core.StaticFilterModelView</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 60</span> 
<span class='linenumber'> 61</span>   </span><span class="NAME">this.filterModel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">config.filterModel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 62</span>   </span><span class="NAME">this.ratio</span><span class="PUNC">=</span><span class="NUMB">60</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 63</span>   </span><span class="NAME">this.rowSize</span><span class="PUNC">=</span><span class="NUMB">27</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 64</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">config.rowSize</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 65</span>     </span><span class="NAME">this.rowSize</span><span class="PUNC">=</span><span class="NAME">config.rowSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 66</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 67</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">config.ratio</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 68</span>     </span><span class="NAME">this.ratio</span><span class="PUNC">=</span><span class="NAME">config.ratio</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 69</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 70</span>   </span><span class="NAME">config</span><span class="PUNC">=</span><span class="NAME">this.createConfig</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 71</span> 
<span class='linenumber'> 72</span>   </span><span class="NAME">this.colsNumber</span><span class="PUNC">=</span><span class="NAME">config.colsNumber</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 73</span> 
<span class='linenumber'> 74</span>   </span><span class="COMM">/** It contains the panels where the filters must be inserted
<span class='linenumber'> 75</span>     * @property {Array of Ext.Panel}
<span class='linenumber'> 76</span>     * @private
<span class='linenumber'> 77</span>     */</span><span class="WHIT">
<span class='linenumber'> 78</span>   </span><span class="NAME">this.panelColumns</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 79</span>   </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.colsNumber</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 80</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 81</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 82</span>   </span><span class="NAME">Ext.ux.netbox.core.StaticFilterModelView.superclass.constructor.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 83</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.rendered</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 84</span>     </span><span class="NAME">this.populateFields</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 85</span>   </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 86</span>     </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">'render'</span><span class="PUNC">,</span><span class="NAME">this.populateFields</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 87</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 88</span>   </span><span class="NAME">this.filterModel.getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'fieldAdded'</span><span class="PUNC">,</span><span class="NAME">this.addField</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 89</span>   </span><span class="NAME">this.filterModel.getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'fieldRemoved'</span><span class="PUNC">,</span><span class="NAME">this.removeField</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 90</span>   </span><span class="NAME">this.filterModel.on</span><span class="PUNC">(</span><span class="STRN">'elementaryFilterAdded'</span><span class="PUNC">,</span><span class="NAME">this.elementaryFilterAdded</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 91</span>   </span><span class="NAME">this.filterModel.on</span><span class="PUNC">(</span><span class="STRN">'elementaryFilterRemoved'</span><span class="PUNC">,</span><span class="NAME">this.elementaryFilterRemoved</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 92</span>   </span><span class="NAME">this.filterModel.on</span><span class="PUNC">(</span><span class="STRN">'filterChanged'</span><span class="PUNC">,</span><span class="NAME">this.populateFilters</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 93</span>   </span><span class="NAME">this.fieldPanelMapping</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.util.MixedCollection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 94</span>   </span><span class="NAME">this.filterEditorsMapping</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 95</span>   </span><span class="NAME">this.managedFilters</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.util.MixedCollection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 96</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.rendered</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 97</span>     </span><span class="NAME">this.populateFilters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 98</span>   </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 99</span>     </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">'render'</span><span class="PUNC">,</span><span class="NAME">this.populateFilters</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>100</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>101</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>102</span> 
<span class='linenumber'>103</span> </span><span class="NAME">Ext.extend</span><span class="PUNC">(</span><span class="NAME">Ext.ux.netbox.core.StaticFilterModelView</span><span class="PUNC">,</span><span class="NAME">Ext.form.FormPanel</span><span class="PUNC">,</span><span class="COMM">/** @scope Ext.ux.netbox.core.StaticFilterModelView.prototype */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>104</span>   </span><span class="COMM">/** This method manipulate the given config option, to create the one that will be sent as parameter to the superclass constructor
<span class='linenumber'>105</span>     * It sets the layout of this panel as a form, containing config.colsNumber * 2 panels. In the even panels there are the label and the operator combo,
<span class='linenumber'>106</span>     * in the odd panels there is the field used to edit the value
<span class='linenumber'>107</span>     * @param {Object} config The config object that is passed to the constructor of the class as parameter
<span class='linenumber'>108</span>     * @return {Object} The config object to use as parameter of the superclass constructor
<span class='linenumber'>109</span>     */</span><span class="WHIT">
<span class='linenumber'>110</span>   </span><span class="NAME">createConfig</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>111</span>     </span><span class="NAME">config.layout</span><span class="PUNC">=</span><span class="STRN">"form"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>112</span>     </span><span class="NAME">config.frame</span><span class="PUNC">=</span><span class="STRN">"true"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>113</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">config.colsNumber</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>114</span>       </span><span class="NAME">config.colsNumber</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>115</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>116</span>     </span><span class="NAME">config.colsNumber</span><span class="PUNC">=</span><span class="NAME">config.colsNumber</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>117</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">colWidth</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">config.colsNumber</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>118</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">items</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>119</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">addPanelCol</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">panel</span><span class="PUNC">,</span><span class="NAME">colNumber</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>120</span>       </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">colNumber</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">panel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>121</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>122</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">config.colsNumber</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>123</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">colWidthTmp</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>124</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">%</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>125</span>         </span><span class="NAME">colWidthTmp</span><span class="PUNC">=</span><span class="NAME">colWidth</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">this.ratio</span><span class="PUNC">/</span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>126</span>       </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">%</span><span class="NUMB">2</span><span class="PUNC">===</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>127</span>         </span><span class="NAME">colWidthTmp</span><span class="PUNC">=</span><span class="NAME">colWidth</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">this.ratio</span><span class="PUNC">/</span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>128</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>129</span> 
<span class='linenumber'>130</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">panelCfg</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>131</span>         </span><span class="NAME">columnWidth</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">colWidthTmp</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>132</span>         </span><span class="NAME">layout</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'anchor'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>133</span>         </span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>134</span>         </span><span class="NAME">plugins</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>135</span>           </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">addPanelCol.createDelegate</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>136</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>137</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>138</span>       </span><span class="NAME">items.push</span><span class="PUNC">(</span><span class="NAME">panelCfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>139</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">%</span><span class="NUMB">2</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>140</span>         </span><span class="NAME">items.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NUMB">15</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">style</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"height: 1px"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>141</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>142</span> 
<span class='linenumber'>143</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>144</span>     </span><span class="NAME">config.items</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">layout</span><span class="PUNC">:</span><span class="STRN">"column"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">items</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">anchor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"100% 100%"</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>145</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>146</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>147</span> 
<span class='linenumber'>148</span>   </span><span class="COMM">/** This method, given the Field, returns the index of the panel containing the editor component for the field in this.panelColumns array.
<span class='linenumber'>149</span>     * &lt;B> NB&lt;/B>: The panel containing the operator combo box is the value returned by this function -1
<span class='linenumber'>150</span>     * @param {Ext.ux.netbox.core.Field} field The field whose index must be calculated
<span class='linenumber'>151</span>     * @return {int} The index of the panel in the this.panelColumns or -1 if for the field there is no panel
<span class='linenumber'>152</span>     */</span><span class="WHIT">
<span class='linenumber'>153</span>   </span><span class="NAME">getEditorPanelNumber</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>154</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.get</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>155</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editorComponent</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditorComponent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>156</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>157</span> 
<span class='linenumber'>158</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">panelNum</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>159</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.panelColumns.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>160</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">items.contains</span><span class="PUNC">(</span><span class="NAME">editorComponent</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>161</span>         </span><span class="NAME">panelNum</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>162</span>         </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>163</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>164</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>165</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">panelNum</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>166</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>167</span> 
<span class='linenumber'>168</span>   </span><span class="COMM">/** Callback for the elementaryFilterRemoved event of the filter manager. It clean the value and the operator of the just removed filter.
<span class='linenumber'>169</span>     * @param {Ext.ux.core.netbox.FilterModel} filterModel The filterModel that fired the event
<span class='linenumber'>170</span>     * @param {Ext.ux.core.netbox.Filter} filter The just removed filter
<span class='linenumber'>171</span>     */</span><span class="WHIT">
<span class='linenumber'>172</span>   </span><span class="NAME">elementaryFilterRemoved</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filterModel</span><span class="PUNC">,</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>173</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">filter.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>174</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">panelNum</span><span class="PUNC">=</span><span class="NAME">this.getEditorPanelNumber</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>175</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.get</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>176</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editorComponent</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditorComponent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>177</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>178</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">editorComponent.items</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">editorComponent.items.getCount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>179</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">componentToRemove</span><span class="PUNC">=</span><span class="NAME">editorComponent.items.first</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>180</span>       </span><span class="NAME">editorComponent.remove</span><span class="PUNC">(</span><span class="NAME">componentToRemove</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>181</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>182</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">operator.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>183</span>       </span><span class="NAME">operator.clearValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>184</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>185</span>     </span><span class="NAME">filter.un</span><span class="PUNC">(</span><span class="STRN">'operatorChanged'</span><span class="PUNC">,</span><span class="NAME">this.operatorChanged</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>186</span>     </span><span class="NAME">filter.un</span><span class="PUNC">(</span><span class="STRN">'valueChanged'</span><span class="PUNC">,</span><span class="NAME">this.valueChanged</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>187</span>     </span><span class="NAME">this.managedFilters.remove</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>188</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>189</span> 
<span class='linenumber'>190</span>   </span><span class="COMM">/** Callback for the elementaryFilterAdded event of the filter manager. It sets the operator on the operatorCombo, and the value in the value field.
<span class='linenumber'>191</span>     * @param {Ext.ux.core.netbox.FilterModel} filterModel The filterModel that fired the event
<span class='linenumber'>192</span>     * @param {Ext.ux.core.netbox.Filter} filter The just added filter
<span class='linenumber'>193</span>     */</span><span class="WHIT">
<span class='linenumber'>194</span>   </span><span class="NAME">elementaryFilterAdded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filterModel</span><span class="PUNC">,</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>195</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">filter.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>196</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">panelNum</span><span class="PUNC">=</span><span class="NAME">this.getEditorPanelNumber</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>197</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.get</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>198</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editorComponent</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditorComponent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>199</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>200</span>     </span><span class="NAME">operator.setValue</span><span class="PUNC">(</span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>201</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editor</span><span class="PUNC">=</span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getEditor</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>202</span>     </span><span class="NAME">this.changeEditor</span><span class="PUNC">(</span><span class="NAME">editor</span><span class="PUNC">,</span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>203</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">formField</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">field</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>204</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">editorComponent.items</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">editorComponent.items.getCount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>205</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">componentToRemove</span><span class="PUNC">=</span><span class="NAME">editorComponent.items.first</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>206</span>       </span><span class="NAME">editorComponent.remove</span><span class="PUNC">(</span><span class="NAME">componentToRemove</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>207</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>208</span> 
<span class='linenumber'>209</span>     </span><span class="NAME">this.addFormField</span><span class="PUNC">(</span><span class="NAME">formField</span><span class="PUNC">,</span><span class="NAME">editorComponent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>210</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">editing</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="COMM">//hack! This is needed to fool the editor into beliving that it's doing something...</span><span class="WHIT">
<span class='linenumber'>211</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>212</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">startValue</span><span class="PUNC">=</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>213</span>     </span><span class="NAME">filter.on</span><span class="PUNC">(</span><span class="STRN">'operatorChanged'</span><span class="PUNC">,</span><span class="NAME">this.operatorChanged</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>214</span>     </span><span class="NAME">filter.on</span><span class="PUNC">(</span><span class="STRN">'valueChanged'</span><span class="PUNC">,</span><span class="NAME">this.valueChanged</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>215</span>     </span><span class="NAME">this.managedFilters.add</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>216</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>217</span> 
<span class='linenumber'>218</span> 
<span class='linenumber'>219</span>   </span><span class="COMM">/** This method changes the editor used to edit the values of a filter (for example if the operator is changed, the editor can be changed as well).
<span class='linenumber'>220</span>     * The listeners on the old editor are removed and added to the new one,
<span class='linenumber'>221</span>     * and then the old editor is replaced with the new one in the GUI
<span class='linenumber'>222</span>     * @param {Ext.Editor} The new editor to use to edit the value
<span class='linenumber'>223</span>     * @param {Ext.ux.netbox.core.ElementaryFilterCfg} elementaryFilterCfg The object that manages the editor actually associated with a field
<span class='linenumber'>224</span>     */</span><span class="WHIT">
<span class='linenumber'>225</span>   </span><span class="NAME">changeEditor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">editor</span><span class="PUNC">,</span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>226</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>227</span>       </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">un</span><span class="PUNC">(</span><span class="STRN">'complete'</span><span class="PUNC">,</span><span class="NAME">this.editingCompleted</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>228</span>       </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">field.un</span><span class="PUNC">(</span><span class="STRN">'change'</span><span class="PUNC">,</span><span class="NAME">this.editingCompleted</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>229</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>230</span>     </span><span class="NAME">elementaryFilterCfg.setEditor</span><span class="PUNC">(</span><span class="NAME">editor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>231</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'complete'</span><span class="PUNC">,</span><span class="NAME">this.editingCompleted</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>232</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">field.on</span><span class="PUNC">(</span><span class="STRN">'change'</span><span class="PUNC">,</span><span class="NAME">this.editingCompleted</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>233</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>234</span> 
<span class='linenumber'>235</span>   </span><span class="COMM">/** It adds the field used to manage the values  of an elementary filter
<span class='linenumber'>236</span>     * @param {Ext.form.Field} formField The field that edits the values
<span class='linenumber'>237</span>     * @param {Ext.Container} editorComponent The field will be added to editorComponent
<span class='linenumber'>238</span>     */</span><span class="WHIT">
<span class='linenumber'>239</span>   </span><span class="NAME">addFormField</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">formField</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">editorComponent</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>240</span>     </span><span class="NAME">editorComponent.add</span><span class="PUNC">(</span><span class="NAME">formField</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>241</span>     </span><span class="NAME">editorComponent.doLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>242</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>243</span> 
<span class='linenumber'>244</span>   </span><span class="COMM">/** Callback for the operatorChanged event of the filter. It sets the operator on the operatorCombo, and change the editor accordingly
<span class='linenumber'>245</span>     * @param {Ext.ux.core.netbox.Filter} filter The filter that fired the event
<span class='linenumber'>246</span>     * @param {Ext.ux.core.netbox.Filter} operator The new operator
<span class='linenumber'>247</span>     */</span><span class="WHIT">
<span class='linenumber'>248</span>   </span><span class="NAME">operatorChanged</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>249</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">filter.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>250</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.get</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>251</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operatorCombo</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>252</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editorComponent</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditorComponent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>253</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">operatorCombo.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="NAME">operator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>254</span>       </span><span class="NAME">operatorCombo.setValue</span><span class="PUNC">(</span><span class="NAME">operator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>255</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">panelNum</span><span class="PUNC">=</span><span class="NAME">this.getEditorPanelNumber</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>256</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editor</span><span class="PUNC">=</span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getEditor</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>257</span>     </span><span class="NAME">this.changeEditor</span><span class="PUNC">(</span><span class="NAME">editor</span><span class="PUNC">,</span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>258</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">formField</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">field</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>259</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">componentToRemove</span><span class="PUNC">=</span><span class="NAME">editorComponent.items.first</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>260</span>     </span><span class="NAME">editorComponent.remove</span><span class="PUNC">(</span><span class="NAME">componentToRemove</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>261</span>     </span><span class="NAME">this.addFormField</span><span class="PUNC">(</span><span class="NAME">formField</span><span class="PUNC">,</span><span class="NAME">editorComponent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>262</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">editing</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="COMM">//hack! This is needed to fool the editor into beliving that it's doing something...</span><span class="WHIT">
<span class='linenumber'>263</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">startValue</span><span class="PUNC">=</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>264</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>266</span> 
<span class='linenumber'>267</span>   </span><span class="COMM">/** Callback for the valueChanged event of the filter. It sets the value on the editor component
<span class='linenumber'>268</span>     * @param {Ext.ux.core.netbox.Filter} filter The filter that fired the event
<span class='linenumber'>269</span>     * @param {Mixed} value The new value
<span class='linenumber'>270</span>     */</span><span class="WHIT">
<span class='linenumber'>271</span>   </span><span class="NAME">valueChanged</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>272</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.get</span><span class="PUNC">(</span><span class="NAME">filter.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>273</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editor</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>274</span>     </span><span class="COMM">//if(Ext.util.JSON.encode(editor.getValue())!==Ext.util.JSON.encode(value)){</span><span class="WHIT">
<span class='linenumber'>275</span>       </span><span class="NAME">editor.setValue</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>276</span>     </span><span class="COMM">//}</span><span class="WHIT">
<span class='linenumber'>277</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>278</span>   </span><span class="COMM">/**Callback of the complete event of the editor, or callback of the change event on the form field, both editing the value of the filter.
<span class='linenumber'>279</span>     * It get the value from the editor, and set the value to the filter.
<span class='linenumber'>280</span>     * @param {Mixed} editorOrFormField. It can be the editor used to edit the value of a filter, or the form field contained in the editor
<span class='linenumber'>281</span>     */</span><span class="WHIT">
<span class='linenumber'>282</span>   </span><span class="NAME">editingCompleted</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">editorOrFormField</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>283</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>284</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="NAME">editorOrFormField</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">field</span><span class="PUNC">==</span><span class="NAME">editorOrFormField</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>285</span>         </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>286</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>287</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>288</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>289</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.find</span><span class="PUNC">(</span><span class="NAME">fn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>290</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>291</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filters</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getElementaryFiltersByFieldId</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>292</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>293</span>       </span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setValues</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>294</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>295</span>     </span><span class="NAME">elementaryFilterCfg.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">editing</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="COMM">//it's still there.... so it's still editing...</span><span class="WHIT">
<span class='linenumber'>296</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>297</span> 
<span class='linenumber'>298</span>   </span><span class="COMM">/** This method add all the field contained in the fieldManager associated to the filterModel.
<span class='linenumber'>299</span>     * This means that it adds the operator combo and the component that will contain the editor for the values of the filter
<span class='linenumber'>300</span>     */</span><span class="WHIT">
<span class='linenumber'>301</span>   </span><span class="NAME">populateFields</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>302</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fields</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAllFields</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>303</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">fields.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>304</span>       </span><span class="NAME">this.addField</span><span class="PUNC">(</span><span class="NAME">fields</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>305</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>306</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>307</span>   </span><span class="COMM">/** This method remove a given field from the view
<span class='linenumber'>308</span>     * This means that it removes the operator combo and the component that will contain the editor for the values of the filter&lt;BR>
<span class='linenumber'>309</span>     * &lt;B> NB&lt;/B>: At this moment the widget are not rearranged, it will be implemented in a later moment
<span class='linenumber'>310</span>     * @param {Ext.ux.netbox.core.Field} field The field to remove
<span class='linenumber'>311</span>     */</span><span class="WHIT">
<span class='linenumber'>312</span>   </span><span class="NAME">removeField</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>313</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">panelNum</span><span class="PUNC">=</span><span class="NAME">this.getEditorPanelNumber</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>314</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.get</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>315</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editorComponent</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getEditorComponent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>316</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>317</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">componentToRemove</span><span class="PUNC">=</span><span class="NAME">editorComponent.items.first</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>318</span>     </span><span class="NAME">editorComponent.remove</span><span class="PUNC">(</span><span class="NAME">componentToRemove</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>319</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">=</span><span class="NAME">operator.getEl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">up</span><span class="PUNC">(</span><span class="STRN">'.x-form-item'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>320</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">panelNum</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="NAME">operator</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>321</span>     </span><span class="NAME">parent.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>322</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">panelNum</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">doLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>323</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">panelNum</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">doLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>324</span>     </span><span class="NAME">this.fieldPanelMapping.removeKey</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>325</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>326</span> 
<span class='linenumber'>327</span>   </span><span class="COMM">/** Callback of the selected event of a operator combo.
<span class='linenumber'>328</span>     * This method, if the selected operator is the empty one, remove the filter, sets the selected operator to the filter otherwise
<span class='linenumber'>329</span>     * @param {Ext.form.ComboBox} combo The combo that fired the event
<span class='linenumber'>330</span>     * @param {Ext.data.Record} record The selected record
<span class='linenumber'>331</span>     * @param {int} index The index of the selected item
<span class='linenumber'>332</span>     */</span><span class="WHIT">
<span class='linenumber'>333</span>   </span><span class="NAME">operatorSelected</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">combo</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>334</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>335</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="NAME">combo</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>336</span>         </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>337</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>338</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>339</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>340</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="NAME">this.fieldPanelMapping.find</span><span class="PUNC">(</span><span class="NAME">fn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>341</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">elementaryFilterCfg.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>342</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filters</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getElementaryFiltersByFieldId</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'operatorId'</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>344</span>       </span><span class="NAME">combo.clearValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>345</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">filters.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>346</span>         </span><span class="NAME">this.filterModel.removeElementaryFilterById</span><span class="PUNC">(</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>347</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>348</span>       </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>349</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>350</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'operatorId'</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="STRN">""</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">filters.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>351</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filterId</span><span class="PUNC">=</span><span class="NAME">this.filterModel.addElementaryFilterByFieldId</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>352</span>       </span><span class="NAME">filters.push</span><span class="PUNC">(</span><span class="NAME">this.filterModel.getElementaryFilterById</span><span class="PUNC">(</span><span class="NAME">filterId</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>353</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>354</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">availableOperators</span><span class="PUNC">=</span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>355</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">availableOperators.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>356</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">availableOperators</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'operatorId'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>357</span>         </span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setOperator</span><span class="PUNC">(</span><span class="NAME">availableOperators</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>358</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>359</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>360</span>     </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>361</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>362</span> 
<span class='linenumber'>363</span>   </span><span class="COMM">/** This method clean the view and then populate all the filters with the actual values from the filterModel.
<span class='linenumber'>364</span>     * This means that it set the operator in the operator combos  and the values in the editor from the filters in the FilterModel.
<span class='linenumber'>365</span>     * This method is called for example when the view is built or when the setExpression method is called on the FilteRManager
<span class='linenumber'>366</span>     */</span><span class="WHIT">
<span class='linenumber'>367</span>   </span><span class="NAME">populateFilters</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>368</span>     </span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">this.managedFilters.getCount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>369</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="NAME">this.managedFilters.last</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>370</span>       </span><span class="NAME">this.elementaryFilterRemoved</span><span class="PUNC">(</span><span class="NAME">this.filterModel</span><span class="PUNC">,</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>371</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>372</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">allFilters</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getAllElementaryFilters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>373</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">allFilters.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>374</span>       </span><span class="NAME">this.elementaryFilterAdded</span><span class="PUNC">(</span><span class="NAME">this.filterModel</span><span class="PUNC">,</span><span class="NAME">allFilters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>375</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>376</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>377</span> 
<span class='linenumber'>378</span>   </span><span class="COMM">/** This method add a given field to the view
<span class='linenumber'>379</span>     * This means that it add the operator combo and the component that will contain the editor for the values of the filter&lt;BR>
<span class='linenumber'>380</span>     * This component are added at the first available place.
<span class='linenumber'>381</span>     * @param {Ext.ux.netbox.core.Field} field The field to add
<span class='linenumber'>382</span>     */</span><span class="WHIT">
<span class='linenumber'>383</span>   </span><span class="NAME">addField</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>384</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cfg</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>385</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.initialConfig.labelWidth</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>386</span>       </span><span class="NAME">cfg.labelWidth</span><span class="PUNC">=</span><span class="NAME">this.initialConfig.labelWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>387</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>388</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.initialConfig.hideLabels</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>389</span>       </span><span class="NAME">cfg.hideLabels</span><span class="PUNC">=</span><span class="NAME">this.initialConfig.hideLabels</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>390</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>391</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.initialConfig.itemCls</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>392</span>       </span><span class="NAME">cfg.itemCls</span><span class="PUNC">=</span><span class="NAME">this.initialConfig.itemCls</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>393</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>394</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.initialConfig.labelAlign</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>395</span>       </span><span class="NAME">cfg.labelAlign</span><span class="PUNC">=</span><span class="NAME">this.initialConfig.labelAlign</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>396</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>397</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.initialConfig.labelPad</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>398</span>       </span><span class="NAME">cfg.labelPad</span><span class="PUNC">=</span><span class="NAME">this.initialConfig.labelPad</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>399</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>400</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.ElementaryFilterCfg</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="NAME">this.rowSize</span><span class="PUNC">,</span><span class="NAME">cfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>401</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">minCount</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>402</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">choosen</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>403</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.panelColumns.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>404</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">items</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>405</span>         </span><span class="NAME">minCount</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>406</span>         </span><span class="NAME">choosen</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>407</span>         </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>408</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>409</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">minCount</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">items.length</span><span class="PUNC">&lt;</span><span class="NAME">minCount</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>410</span>         </span><span class="NAME">minCount</span><span class="PUNC">=</span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">items.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>411</span>         </span><span class="NAME">choosen</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>412</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>413</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>414</span>     </span><span class="NAME">this.fieldPanelMapping.add</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">elementaryFilterCfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>415</span>     </span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'select'</span><span class="PUNC">,</span><span class="NAME">this.operatorSelected</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>416</span>     </span><span class="NAME">cfg.layout</span><span class="PUNC">=</span><span class="STRN">"form"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>417</span>     </span><span class="NAME">cfg.anchor</span><span class="PUNC">=</span><span class="STRN">"100%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>418</span>     </span><span class="NAME">cfg.items</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">elementaryFilterCfg.getOperatorCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>419</span>     </span><span class="NAME">cfg.height</span><span class="PUNC">=</span><span class="NAME">this.rowSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>420</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">choosen</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">cfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>421</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">choosen</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">doLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>422</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">choosen</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">elementaryFilterCfg.getEditorComponent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>423</span>     </span><span class="NAME">this.panelColumns</span><span class="PUNC">[</span><span class="NAME">choosen</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">doLayout</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>424</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>425</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>426</span> 
<span class='linenumber'>427</span> 
<span class='linenumber'>428</span> </span><span class="NAME">Ext.reg</span><span class="PUNC">(</span><span class="STRN">'staticFilter'</span><span class="PUNC">,</span><span class="NAME">Ext.ux.netbox.core.StaticFilterModelView</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>429</span> 
<span class='linenumber'>430</span> </span><span class="COMM">/** It instantiates a new ElementaryFilterCfg
<span class='linenumber'>431</span>   * @class This is a private class used in StaticFilterManagerView. It's used to contain the operator Combo and the actual editor component for a given field
<span class='linenumber'>432</span>   * @constructor
<span class='linenumber'>433</span>   * @ignore
<span class='linenumber'>434</span>   */</span><span class="WHIT">
<span class='linenumber'>435</span> </span><span class="NAME">Ext.ux.netbox.core.ElementaryFilterCfg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="NAME">rowSize</span><span class="PUNC">,</span><span class="NAME">cfg</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>436</span>   </span><span class="NAME">this.rowSize</span><span class="PUNC">=</span><span class="NAME">rowSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>437</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operators</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">[</span><span class="STRN">""</span><span class="PUNC">,</span><span class="STRN">"&lt;PRE> &lt;/PRE>"</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>438</span>   </span><span class="NAME">this.labelAlign</span><span class="PUNC">=</span><span class="NAME">cfg.labelAlign</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>439</span>   </span><span class="NAME">this.field</span><span class="PUNC">=</span><span class="NAME">field</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>440</span>   </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>441</span>     </span><span class="NAME">operators.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>442</span>     </span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>443</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>444</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operatorStore</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.data.SimpleStore</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>445</span>     </span><span class="NAME">fields</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="STRN">'operatorLabel'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>446</span>     </span><span class="NAME">data</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">operators</span><span class="WHIT">
<span class='linenumber'>447</span>   </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>448</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">comboCfg</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>449</span>       </span><span class="NAME">store</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">operatorStore</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>450</span>       </span><span class="NAME">mode</span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'local'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>451</span>       </span><span class="NAME">valueField</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>452</span>       </span><span class="NAME">displayField</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'operatorLabel'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>453</span>       </span><span class="NAME">editable</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>454</span>       </span><span class="NAME">triggerAction</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'all'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>455</span>       </span><span class="NAME">lazyRender</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>456</span>       </span><span class="NAME">fieldLabel</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">field.getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>457</span>       </span><span class="NAME">width</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">105</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>458</span>       </span><span class="NAME">tpl</span><span class="WHIT">           </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'&lt;tpl for=".">&lt;div class="x-combo-list-item">{[values.operatorLabel=="&lt;PRE> &lt;/PRE>" ? values.operatorLabel : values.operatorLabel.escHtml()]}&lt;/div>&lt;/tpl>'</span><span class="WHIT">
<span class='linenumber'>459</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>460</span>   
<span class='linenumber'>461</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.isSafari</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>462</span>     </span><span class="NAME">comboCfg.anchor</span><span class="PUNC">=</span><span class="STRN">"90%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>463</span>   </span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>464</span>     </span><span class="NAME">comboCfg.anchor</span><span class="PUNC">=</span><span class="STRN">"98%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>465</span>   </span><span class="NAME">comboCfg.anchor</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="STRN">" 100%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>466</span>   </span><span class="NAME">this.operatorCombo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.form.ComboBox</span><span class="PUNC">(</span><span class="NAME">comboCfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>467</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cfgCloned</span><span class="PUNC">=</span><span class="NAME">Ext.apply</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">cfg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>468</span>   </span><span class="NAME">cfgCloned.layout</span><span class="PUNC">=</span><span class="STRN">'form'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>469</span>   </span><span class="NAME">cfgCloned.height</span><span class="PUNC">=</span><span class="NAME">this.rowSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>470</span>   </span><span class="NAME">cfgCloned.labelWidth</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>471</span>   </span><span class="NAME">cfgCloned.labelPad</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>472</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.labelAlign</span><span class="PUNC">!==</span><span class="STRN">"top"</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>473</span>     </span><span class="NAME">cfgCloned.hideLabels</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>474</span>   </span><span class="NAME">this.editorComponent</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.Panel</span><span class="PUNC">(</span><span class="NAME">cfgCloned</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>475</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>476</span> 
<span class='linenumber'>477</span> </span><span class="NAME">Ext.ux.netbox.core.ElementaryFilterCfg.prototype</span><span class="PUNC">=</span><span class="COMM">/** @scope Ext.ux.netbox.core.ElementaryFilterCfg.prototype */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>478</span>   </span><span class="COMM">/** Returns the operator combo used to edit the elementary filter s of the given field
<span class='linenumber'>479</span>     * @return {Ext.form.ComboBox} The returned combo.
<span class='linenumber'>480</span>     * @ignore
<span class='linenumber'>481</span>     */</span><span class="WHIT">
<span class='linenumber'>482</span>   </span><span class="NAME">getOperatorCombo</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>483</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.operatorCombo</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>484</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>485</span> 
<span class='linenumber'>486</span>   </span><span class="COMM">/** Returns the container that will contain the field used to edit the value of the elementary filter
<span class='linenumber'>487</span>     * @return {Ext.Container} The returned container.
<span class='linenumber'>488</span>     * @ignore
<span class='linenumber'>489</span>     */</span><span class="WHIT">
<span class='linenumber'>490</span>   </span><span class="NAME">getEditorComponent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>491</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.editorComponent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>492</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>493</span>   </span><span class="COMM">/** Returns the form field to edit the value of the elementary filter
<span class='linenumber'>494</span>     * @return {Ext.form.Field} The returned form field.
<span class='linenumber'>495</span>     * @ignore
<span class='linenumber'>496</span>     */</span><span class="WHIT">
<span class='linenumber'>497</span>   </span><span class="NAME">getField</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>498</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.field</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>499</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>500</span>   </span><span class="COMM">/** It sets the editor used to manage the values of the elementary filter
<span class='linenumber'>501</span>     * @param {Ext.Editor} editor The editor to use to manage the values of the elementary filter
<span class='linenumber'>502</span>     * @ignore
<span class='linenumber'>503</span>     */</span><span class="WHIT">
<span class='linenumber'>504</span>   </span><span class="NAME">setEditor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">editor</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>505</span>     </span><span class="NAME">this.editor</span><span class="PUNC">=</span><span class="NAME">editor</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>506</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.isSafari</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>507</span>       </span><span class="NAME">this.editor.field.anchor</span><span class="PUNC">=</span><span class="STRN">"90%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>508</span>     </span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>509</span>       </span><span class="NAME">this.editor.field.anchor</span><span class="PUNC">=</span><span class="STRN">"98%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>510</span>     </span><span class="NAME">this.editor.field.labelSeparator</span><span class="PUNC">=</span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>511</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.labelAlign</span><span class="PUNC">==</span><span class="STRN">"top"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>512</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.isIE</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>513</span>         </span><span class="NAME">this.editor.field.fieldLabel</span><span class="PUNC">=</span><span class="STRN">"&lt;pre> &lt;/pre>"</span><span class="PUNC">;</span><span class="COMM">//this one doesn't work in FF</span><span class="WHIT">
<span class='linenumber'>514</span>       </span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>515</span>         </span><span class="NAME">this.editor.field.labelStyle</span><span class="PUNC">=</span><span class="STRN">"white-space: pre;"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//this one doesn't work in IE6</span><span class="WHIT">
<span class='linenumber'>516</span>         </span><span class="NAME">this.editor.field.fieldLabel</span><span class="PUNC">=</span><span class="STRN">" "</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>517</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>518</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>519</span>       </span><span class="NAME">this.editor.field.fieldLabel</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>520</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>521</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>522</span>   </span><span class="COMM">/** It returns the editor used to manage the values of the elementary filter
<span class='linenumber'>523</span>     * @return {Ext.Editor} The editor used to manage the values of the elementary filter
<span class='linenumber'>524</span>     * @ignore
<span class='linenumber'>525</span>     */</span><span class="WHIT">
<span class='linenumber'>526</span>   </span><span class="NAME">getEditor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>527</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.editor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>528</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>529</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>530</span> </span></pre></body></html>