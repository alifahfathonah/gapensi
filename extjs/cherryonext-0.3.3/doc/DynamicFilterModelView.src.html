<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='linenumber'>  1</span> <span class="COMM">// $Id: DynamicFilterModelView.js 184 2008-09-19 15:05:19Z bobbicat71 $</span><span class="WHIT">
<span class='linenumber'>  2</span> 
<span class='linenumber'>  3</span> </span><span class="NAME">Ext.namespace</span><span class="PUNC">(</span><span class="STRN">'Ext.ux.netbox.core'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  4</span> 
<span class='linenumber'>  5</span> </span><span class="COMM">/** It instantiates a DynamicFilterModelView
<span class='linenumber'>  6</span>   * @class It implements the view for dynamic filters. Dynamic filters mean that the user is allowed to add, remove filter, seeing only the actual filters.
<span class='linenumber'>  7</span>   * It's possible to define more than one filter for the same field.
<span class='linenumber'>  8</span>   * It can be lazyly instantiated using dynamicFilter as xtype.
<span class='linenumber'>  9</span>   * &lt;h4> Example &lt;/h4>
<span class='linenumber'> 10</span>   * The following code will instantiate a window with a DynamicFilterModelView inside using lazy initialization
<span class='linenumber'> 11</span>   * &lt;pre>
<span class='linenumber'> 12</span>   * win=new Ext.Window({
<span class='linenumber'> 13</span>   *   title: 'Filters',
<span class='linenumber'> 14</span>   *   width:600,
<span class='linenumber'> 15</span>   *   height:350,
<span class='linenumber'> 16</span>   *   layout: 'border',
<span class='linenumber'> 17</span>   *   closeAction: 'hide',
<span class='linenumber'> 18</span>   *   items: [{ filterModel: filterModel,
<span class='linenumber'> 19</span>   *     region: "center",
<span class='linenumber'> 20</span>   *     xtype: 'dynamicFilter'
<span class='linenumber'> 21</span>   *   }]
<span class='linenumber'> 22</span>   * });
<span class='linenumber'> 23</span>   * &lt;/pre>
<span class='linenumber'> 24</span>   * @constructor
<span class='linenumber'> 25</span>   * @param {Object} config
<span class='linenumber'> 26</span>   * @config {Ext.ux.netbox.core.FilterModel}filterModel the filterModel whose filters must be showed
<span class='linenumber'> 27</span>   */</span><span class="WHIT">
<span class='linenumber'> 28</span> </span><span class="NAME">Ext.ux.netbox.core.DynamicFilterModelView</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 29</span>   </span><span class="NAME">this.filterModel</span><span class="PUNC">=</span><span class="NAME">config.filterModel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 30</span>   </span><span class="NAME">config</span><span class="PUNC">=</span><span class="NAME">this.createFilterGridConfig</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 31</span>   </span><span class="NAME">Ext.ux.netbox.core.DynamicFilterModelView.superclass.constructor.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 32</span> 
<span class='linenumber'> 33</span>   </span><span class="NAME">this.populateFilterStore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 34</span>   </span><span class="NAME">this.createFieldCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 35</span>   </span><span class="NAME">this.createLogicOpeCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 36</span>   </span><span class="NAME">this.setLogicOpeCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 37</span> 
<span class='linenumber'> 38</span>   </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">'cellclick'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.removeFilter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 39</span>   </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">'beforeedit'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.updateOperatorStore</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 40</span>   </span><span class="NAME">this.on</span><span class="PUNC">(</span><span class="STRN">'afteredit'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.updateFilter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 41</span> 
<span class='linenumber'> 42</span>   </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'elementaryFilterAdded'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.onFilterAdded</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 43</span>   </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'elementaryFilterRemoved'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.onFilterRemoved</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 44</span>   </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'filterChanged'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.onFilterChanged</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 45</span>   </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'fieldAdded'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.onFieldAdded</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 46</span>   </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="STRN">'fieldRemoved'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.onFieldRemoved</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 47</span> 
<span class='linenumber'> 48</span>   </span><span class="NAME">this.getView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getRowClass</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowParams</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 49</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cls</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 50</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aFilter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">record.data.filter</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 51</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">aFilter.isValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 52</span>       </span><span class="NAME">cls</span><span class="PUNC">=</span><span class="STRN">'x-grid3-row-notValid'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 53</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 54</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">cls</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 55</span>   </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 56</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 57</span> 
<span class='linenumber'> 58</span> </span><span class="NAME">Ext.extend</span><span class="PUNC">(</span><span class="NAME">Ext.ux.netbox.core.DynamicFilterModelView</span><span class="PUNC">,</span><span class="NAME">Ext.grid.EditorGridPanel</span><span class="PUNC">,</span><span class="COMM">/** @scope Ext.ux.netbox.core.DynamicFilterModelView.prototype */</span><span class="WHIT">
<span class='linenumber'> 59</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 60</span>   </span><span class="NAME">deleteText</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Delete'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 61</span>   </span><span class="NAME">filterText</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Field'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 62</span>   </span><span class="NAME">operatorText</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Operator'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 63</span>   </span><span class="NAME">valueText</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Value'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 64</span>   </span><span class="NAME">comboText</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Select a new field'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 65</span>   </span><span class="NAME">logicOpeAndText</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Check all'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 66</span>   </span><span class="NAME">logicOpeOrText</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Check at least one'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 67</span> 
<span class='linenumber'> 68</span>   </span><span class="COMM">/** getFilterModel
<span class='linenumber'> 69</span>     * @private
<span class='linenumber'> 70</span>     */</span><span class="WHIT">
<span class='linenumber'> 71</span>   </span><span class="NAME">getFilterModel</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 72</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.filterModel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 73</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 74</span>   </span><span class="COMM">/** onFieldAdded
<span class='linenumber'> 75</span>     * @private
<span class='linenumber'> 76</span>     */</span><span class="WHIT">
<span class='linenumber'> 77</span>   </span><span class="NAME">onFieldAdded</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 78</span>     </span><span class="NAME">this.addFields</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">field</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 79</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 80</span>     </span><span class="COMM">/** onFieldRemoved
<span class='linenumber'> 81</span>     * @private
<span class='linenumber'> 82</span>     */</span><span class="WHIT">
<span class='linenumber'> 83</span>   </span><span class="NAME">onFieldRemoved</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 84</span>     </span><span class="NAME">this.removeFields</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 85</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 86</span>   </span><span class="COMM">/** onFilterAdded
<span class='linenumber'> 87</span>     * @private
<span class='linenumber'> 88</span>     */</span><span class="WHIT">
<span class='linenumber'> 89</span>   </span><span class="NAME">onFilterAdded</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filterModel</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 90</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filterRecord</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 91</span>     </span><span class="NAME">filterRecord.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">''</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 92</span>       </span><span class="NAME">filter.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 93</span>       </span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 94</span>       </span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 95</span>       </span><span class="NAME">filter</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 96</span>       </span><span class="NAME">filter.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 97</span>     </span><span class="NAME">this.filterStore.loadData</span><span class="PUNC">(</span><span class="NAME">filterRecord</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 98</span>     </span><span class="NAME">filter.on</span><span class="PUNC">(</span><span class="STRN">'operatorChanged'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.updateFilterOperator</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 99</span>     </span><span class="NAME">filter.on</span><span class="PUNC">(</span><span class="STRN">'valueChanged'</span><span class="PUNC">,</span><span class="NAME">this.updateFilterValues</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>100</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>101</span>   </span><span class="COMM">/** onFilterRemoved
<span class='linenumber'>102</span>     * @private
<span class='linenumber'>103</span>     */</span><span class="WHIT">
<span class='linenumber'>104</span>   </span><span class="NAME">onFilterRemoved</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filterModel</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>105</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">recordToRemove</span><span class="PUNC">=</span><span class="NAME">this.filterStore.getById</span><span class="PUNC">(</span><span class="NAME">filter.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>106</span>     </span><span class="NAME">this.filterStore.remove</span><span class="PUNC">(</span><span class="NAME">recordToRemove</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>107</span>     </span><span class="NAME">filter.un</span><span class="PUNC">(</span><span class="STRN">'operatorChanged'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.updateFilterOperator</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>108</span>     </span><span class="NAME">filter.on</span><span class="PUNC">(</span><span class="STRN">'valueChanged'</span><span class="PUNC">,</span><span class="NAME">this.updateFilterValues</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>109</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>110</span>   </span><span class="COMM">/** onFilterChanged
<span class='linenumber'>111</span>     * @private
<span class='linenumber'>112</span>     */</span><span class="WHIT">
<span class='linenumber'>113</span>   </span><span class="NAME">onFilterChanged</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>114</span>     </span><span class="NAME">this.populateFilterStore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>115</span>     </span><span class="NAME">this.setLogicOpeCombo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>116</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>117</span>   </span><span class="COMM">/** onEditComplete
<span class='linenumber'>118</span>     * @private
<span class='linenumber'>119</span>     */</span><span class="WHIT">
<span class='linenumber'>120</span>   </span><span class="NAME">onEditComplete</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ed</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">startValue</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>121</span>     </span><span class="NAME">this.editing</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>122</span>     </span><span class="NAME">this.activeEditor</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>123</span>     </span><span class="NAME">ed.un</span><span class="PUNC">(</span><span class="STRN">'specialkey'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.selModel.onEditorKey</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.selModel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>124</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">startValue</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>125</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">ed.record</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>126</span>       </span><span class="COMM">//workaround to manage objects in editorGrid</span><span class="WHIT">
<span class='linenumber'>127</span>       </span><span class="NAME">r.set</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>128</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">this.data</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>129</span>           </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>130</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>131</span>         </span><span class="NAME">this.dirty</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>132</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.modified</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>133</span>           </span><span class="NAME">this.modified</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>134</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>135</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.modified</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">'undefined'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>136</span>           </span><span class="NAME">this.modified</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this.data</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>137</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>138</span>         </span><span class="NAME">this.data</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>139</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.editing</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>140</span>           </span><span class="NAME">this.store.afterEdit</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>141</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>142</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>143</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">this.colModel.getDataIndex</span><span class="PUNC">(</span><span class="NAME">ed.col</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>144</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>145</span>         </span><span class="NAME">grid</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>146</span>         </span><span class="NAME">record</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>147</span>         </span><span class="NAME">field</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>148</span>         </span><span class="NAME">originalValue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">startValue</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>149</span>         </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>150</span>         </span><span class="NAME">row</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ed.row</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>151</span>         </span><span class="NAME">column</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ed.col</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>152</span>         </span><span class="NAME">cancel</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>153</span>         </span><span class="NAME">renderTo</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>154</span>       </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>155</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">'validateedit'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">e.cancel</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>156</span>         </span><span class="NAME">r.set</span><span class="PUNC">(</span><span class="NAME">field</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e.value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>157</span>         </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">e.cancel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>158</span>         </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">'afteredit'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>159</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>160</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>161</span>     </span><span class="NAME">this.view.focusCell</span><span class="PUNC">(</span><span class="NAME">ed.row</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ed.col</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>162</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>163</span>   </span><span class="NAME">onRender</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">container</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>164</span>      </span><span class="NAME">Ext.ux.netbox.core.DynamicFilterModelView.superclass.onRender.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">container</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>165</span>      </span><span class="NAME">this.getTopToolbar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addField</span><span class="PUNC">(</span><span class="NAME">this.fieldCombo</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>166</span>      </span><span class="NAME">this.getTopToolbar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addSeparator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>167</span>      </span><span class="NAME">this.getTopToolbar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addField</span><span class="PUNC">(</span><span class="NAME">this.logicOpeCombo</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>168</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>169</span>   </span><span class="COMM">/** createFilterGridConfig addding the store etc...
<span class='linenumber'>170</span>     *
<span class='linenumber'>171</span>     */</span><span class="WHIT">
<span class='linenumber'>172</span>   </span><span class="NAME">createFilterGridConfig</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>173</span> 
<span class='linenumber'>174</span>     </span><span class="NAME">this.filterStore</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.data.SimpleStore</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>175</span>       </span><span class="NAME">fields</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'image'</span><span class="PUNC">,</span><span class="STRN">'field'</span><span class="PUNC">,</span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="STRN">'value'</span><span class="PUNC">,</span><span class="STRN">'filter'</span><span class="PUNC">,</span><span class="STRN">'filterId'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>176</span>       </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>177</span>       </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>178</span> 
<span class='linenumber'>179</span>     </span><span class="NAME">this.operatorStore</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.data.SimpleStore</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>180</span>       </span><span class="NAME">fields</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="STRN">'operatorLabel'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>181</span>       </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>182</span> 
<span class='linenumber'>183</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operatorCombo</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.form.ComboBox</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>184</span>       </span><span class="NAME">store</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.operatorStore</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>185</span>       </span><span class="NAME">mode</span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'local'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>186</span>       </span><span class="NAME">valueField</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>187</span>       </span><span class="NAME">displayField</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'operatorLabel'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>188</span>       </span><span class="NAME">editable</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>189</span>       </span><span class="NAME">triggerAction</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'all'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>190</span>       </span><span class="NAME">lazyRender</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>191</span>       </span><span class="NAME">listClass</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'x-combo-list-small'</span><span class="WHIT">
<span class='linenumber'>192</span>     </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>193</span> 
<span class='linenumber'>194</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cm</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.grid.ColumnModel</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>195</span>         </span><span class="NAME">header</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.deleteText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>196</span>         </span><span class="NAME">renderer</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.imageRenderer</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>197</span>         </span><span class="NAME">width</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">50</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>198</span>         </span><span class="NAME">dataIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'image'</span><span class="WHIT">
<span class='linenumber'>199</span>       </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>200</span>         </span><span class="NAME">header</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.filterText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>201</span>         </span><span class="NAME">renderer</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.fieldRenderer</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>202</span>         </span><span class="NAME">width</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">150</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>203</span>         </span><span class="NAME">dataIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'field'</span><span class="WHIT">
<span class='linenumber'>204</span>       </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>205</span>         </span><span class="NAME">header</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.operatorText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>206</span>         </span><span class="NAME">renderer</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.operatorRenderer</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>207</span>         </span><span class="NAME">width</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">150</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>208</span>         </span><span class="NAME">dataIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>209</span>         </span><span class="NAME">editor</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">operatorCombo</span><span class="WHIT">
<span class='linenumber'>210</span>       </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>211</span>         </span><span class="NAME">header</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.valueText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>212</span>         </span><span class="NAME">width</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">150</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>213</span>         </span><span class="NAME">renderer</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.valueRenderer</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>214</span>         </span><span class="NAME">editable</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>215</span>         </span><span class="NAME">dataIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'value'</span><span class="WHIT">
<span class='linenumber'>216</span>       </span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>217</span>     </span><span class="COMM">//hack to stop the editing when the user selects a new item.</span><span class="WHIT">
<span class='linenumber'>218</span>     </span><span class="NAME">operatorCombo.on</span><span class="PUNC">(</span><span class="STRN">'select'</span><span class="PUNC">,</span><span class="NAME">this.completeEditLater</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>219</span> 
<span class='linenumber'>220</span>     </span><span class="NAME">cm.getCellEditorOrig</span><span class="PUNC">=</span><span class="NAME">cm.getCellEditor</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>221</span>     </span><span class="NAME">cm.filterStore</span><span class="PUNC">=</span><span class="NAME">this.filterStore</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>222</span>     </span><span class="NAME">cm.getCellEditor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>223</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">colIndex</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>224</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="NAME">this.filterStore.getAt</span><span class="PUNC">(</span><span class="NAME">rowIndex</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">'filter'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>225</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>226</span>         </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">operator.getEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>227</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>228</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.getCellEditorOrig</span><span class="PUNC">(</span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>229</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>230</span>     </span><span class="NAME">config.store</span><span class="PUNC">=</span><span class="NAME">this.filterStore</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>231</span>     </span><span class="NAME">config.colModel</span><span class="PUNC">=</span><span class="NAME">cm</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>232</span>     </span><span class="NAME">config.cm</span><span class="PUNC">=</span><span class="NAME">cm</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>233</span>     </span><span class="NAME">config.clicksToEdit</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>234</span>     </span><span class="NAME">config.autoExpandColumn</span><span class="PUNC">=</span><span class="STRN">'3'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>235</span>     </span><span class="NAME">config.enableColumnHide</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>236</span>     </span><span class="NAME">config.enableColumnMove</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>237</span>     </span><span class="NAME">config.enableColumnResize</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>238</span>     </span><span class="NAME">config.elements</span><span class="PUNC">=</span><span class="STRN">'body, tbar'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>239</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">config.tbar</span><span class="PUNC">==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>240</span>       </span><span class="NAME">config.tbar</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>241</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>242</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>243</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>244</span>   
<span class='linenumber'>245</span>   </span><span class="COMM">/** This is a hack. If I stop editing on the select event, the gridpanel will scroll to the first row if there is a scrollbar.
<span class='linenumber'>246</span>     * The reason is that the ComboBox will request the focus after the event, even if it's not visible 
<span class='linenumber'>247</span>     * (the editor that contains the combo is already hidden)
<span class='linenumber'>248</span>     * I delay the complete of the editing at the end of the browser event queue (0 milliseconds of delay), to avoid the problem
<span class='linenumber'>249</span>     * @provate
<span class='linenumber'>250</span>     * @ignore
<span class='linenumber'>251</span>     */</span><span class="WHIT">
<span class='linenumber'>252</span>   </span><span class="NAME">completeEditLater</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>253</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scope</span><span class="PUNC">=</span><span class="NAME">this.getColumnModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getCellEditor</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>254</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="PUNC">=</span><span class="NAME">scope.completeEdit</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>255</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">task</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.util.DelayedTask</span><span class="PUNC">(</span><span class="NAME">fn</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>256</span>     </span><span class="NAME">task.delay</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>257</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>258</span>   </span><span class="COMM">/** populateFilterStore
<span class='linenumber'>259</span>     *
<span class='linenumber'>260</span>     */</span><span class="WHIT">
<span class='linenumber'>261</span>   </span><span class="NAME">populateFilterStore</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>262</span>     </span><span class="NAME">this.filterStore.removeAll</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>263</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAllElementaryFilters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>264</span>       </span><span class="NAME">this.onFilterAdded</span><span class="PUNC">(</span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAllElementaryFilters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>266</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>267</span>   </span><span class="COMM">/** createFieldCombo
<span class='linenumber'>268</span>     *
<span class='linenumber'>269</span>     */</span><span class="WHIT">
<span class='linenumber'>270</span>   </span><span class="NAME">createFieldCombo</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>271</span>     </span><span class="NAME">this.fieldStore</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.data.SimpleStore</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">fields</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'fieldId'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'label'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>272</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">allFields</span><span class="PUNC">=</span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAllFields</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>273</span>     </span><span class="NAME">this.addFields</span><span class="PUNC">(</span><span class="NAME">allFields</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>274</span> 
<span class='linenumber'>275</span>     </span><span class="NAME">this.fieldCombo</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.form.ComboBox</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>276</span>         </span><span class="NAME">emptyText</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.comboText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>277</span>         </span><span class="NAME">displayField</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'label'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>278</span>         </span><span class="NAME">valueField</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'fieldId'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>279</span>         </span><span class="NAME">store</span><span class="WHIT">         </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.fieldStore</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>280</span>         </span><span class="NAME">mode</span><span class="WHIT">          </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'local'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>281</span>         </span><span class="NAME">triggerAction</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'all'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>282</span>         </span><span class="NAME">selectOnFocus</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>283</span>         </span><span class="NAME">typeAhead</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>284</span>         </span><span class="NAME">editable</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT">
<span class='linenumber'>285</span>         </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>286</span> 
<span class='linenumber'>287</span>     </span><span class="NAME">this.fieldCombo.on</span><span class="PUNC">(</span><span class="STRN">'select'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.addFilter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>288</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>289</span>   </span><span class="COMM">/** createLogicOpeCombo
<span class='linenumber'>290</span>     *
<span class='linenumber'>291</span>     */</span><span class="WHIT">  
<span class='linenumber'>292</span>   </span><span class="NAME">createLogicOpeCombo</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>293</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">logicOpeStore</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.data.SimpleStore</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>294</span>         </span><span class="NAME">fields</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'label'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'value'</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>295</span>         </span><span class="NAME">data</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">this.logicOpeAndText</span><span class="PUNC">,</span><span class="NAME">Ext.ux.netbox.core.CompositeFilter.AND</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>296</span>                 </span><span class="PUNC">[</span><span class="NAME">this.logicOpeOrText</span><span class="PUNC">,</span><span class="NAME">Ext.ux.netbox.core.CompositeFilter.OR</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">]</span><span class="WHIT">
<span class='linenumber'>297</span>         </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>298</span>     </span><span class="NAME">this.logicOpeCombo</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.form.ComboBox</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>299</span>         </span><span class="NAME">displayField</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'label'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>300</span>         </span><span class="NAME">valueField</span><span class="WHIT">      </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'value'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>301</span>         </span><span class="NAME">store</span><span class="WHIT">           </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">logicOpeStore</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>302</span>         </span><span class="NAME">mode</span><span class="WHIT">            </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'local'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>303</span>         </span><span class="NAME">triggerAction</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'all'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>304</span>         </span><span class="NAME">selectOnFocus</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>305</span>         </span><span class="NAME">editable</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>306</span>         </span><span class="NAME">value</span><span class="WHIT">           </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.CompositeFilter.AND</span><span class="WHIT">
<span class='linenumber'>307</span>         </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>308</span> 
<span class='linenumber'>309</span>     </span><span class="NAME">this.logicOpeCombo.on</span><span class="PUNC">(</span><span class="STRN">'select'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.chgLogicOpe</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>310</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>311</span>   </span><span class="COMM">/** setLogicOpeCombo
<span class='linenumber'>312</span>     *
<span class='linenumber'>313</span>     *
<span class='linenumber'>314</span>     */</span><span class="WHIT">
<span class='linenumber'>315</span>   </span><span class="NAME">setLogicOpeCombo</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>316</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getFilter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>317</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.CompositeFilter</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>318</span>       </span><span class="NAME">this.logicOpeCombo.setValue</span><span class="PUNC">(</span><span class="NAME">filter.getLogicalOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>319</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>320</span>   </span><span class="COMM">/** addFields
<span class='linenumber'>321</span>     *
<span class='linenumber'>322</span>     *
<span class='linenumber'>323</span>     */</span><span class="WHIT">
<span class='linenumber'>324</span>   </span><span class="NAME">addFields</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">fieldsToAdd</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>325</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fields</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>326</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">fieldsToAdd.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>327</span>       </span><span class="NAME">fields.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">fieldsToAdd</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">fieldsToAdd</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>328</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>329</span>     </span><span class="NAME">this.fieldStore.loadData</span><span class="PUNC">(</span><span class="NAME">fields</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>330</span>     </span><span class="NAME">this.fieldStore.sort</span><span class="PUNC">(</span><span class="STRN">'label'</span><span class="PUNC">,</span><span class="STRN">'ASC'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>331</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>332</span>   </span><span class="COMM">/** removeFields
<span class='linenumber'>333</span>     *
<span class='linenumber'>334</span>     *
<span class='linenumber'>335</span>     */</span><span class="WHIT">
<span class='linenumber'>336</span>   </span><span class="NAME">removeFields</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">fieldToRemove</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>337</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fieldId</span><span class="PUNC">=</span><span class="NAME">fieldToRemove.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>338</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">toRemove</span><span class="PUNC">=</span><span class="NAME">this.fieldStore.getById</span><span class="PUNC">(</span><span class="NAME">fieldId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>339</span>     </span><span class="NAME">this.fieldStore.remove</span><span class="PUNC">(</span><span class="NAME">toRemove</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>340</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>341</span>   </span><span class="COMM">/** addFilter
<span class='linenumber'>342</span>     *
<span class='linenumber'>343</span>     *
<span class='linenumber'>344</span>     */</span><span class="WHIT">
<span class='linenumber'>345</span>   </span><span class="NAME">addFilter</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">combo</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>346</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">addedId</span><span class="PUNC">=</span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addElementaryFilterByFieldId</span><span class="PUNC">(</span><span class="NAME">record.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>347</span>     </span><span class="NAME">this.fieldCombo.clearValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>348</span>     </span><span class="NAME">this.filterStore.indexOfId</span><span class="PUNC">(</span><span class="NAME">addedId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>349</span>     </span><span class="NAME">this.startEditing</span><span class="PUNC">(</span><span class="NAME">this.filterStore.indexOfId</span><span class="PUNC">(</span><span class="NAME">addedId</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>350</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>351</span>   </span><span class="COMM">/** chgLogicOpe
<span class='linenumber'>352</span>     *
<span class='linenumber'>353</span>     *
<span class='linenumber'>354</span>     */</span><span class="WHIT">
<span class='linenumber'>355</span>   </span><span class="NAME">chgLogicOpe</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">combo</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>356</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">logicOpe</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'value'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>357</span>     </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setLogicalOperator</span><span class="PUNC">(</span><span class="NAME">logicOpe</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>358</span>     </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>359</span>       </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>360</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.CompositeFilter</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">filter.getLogicalOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">logicOpe</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>361</span>           </span><span class="NAME">filter.setLogicalOperator</span><span class="PUNC">(</span><span class="NAME">logicOpe</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>362</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>363</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>364</span>     </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>365</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>366</span>   </span><span class="COMM">/** removeFilter
<span class='linenumber'>367</span>     *
<span class='linenumber'>368</span>     *
<span class='linenumber'>369</span>     */</span><span class="WHIT">
<span class='linenumber'>370</span>   </span><span class="NAME">removeFilter</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">columnIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">event</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>371</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">columnIndex</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>372</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">recordToRemove</span><span class="PUNC">=</span><span class="NAME">grid.getStore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAt</span><span class="PUNC">(</span><span class="NAME">rowIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>373</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="NAME">recordToRemove.get</span><span class="PUNC">(</span><span class="STRN">'filter'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>374</span>       </span><span class="NAME">this.getFilterModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeElementaryFilterById</span><span class="PUNC">(</span><span class="NAME">filter.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>375</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>376</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>377</span>   </span><span class="COMM">/** updateOperatorStore
<span class='linenumber'>378</span>     *
<span class='linenumber'>379</span>     */</span><span class="WHIT">
<span class='linenumber'>380</span>   </span><span class="NAME">updateOperatorStore</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>381</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.column</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>382</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">e.record.get</span><span class="PUNC">(</span><span class="STRN">'field'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>383</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operators</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>384</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>385</span>         </span><span class="NAME">operators.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>386</span>                         </span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>387</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>388</span>       </span><span class="NAME">this.operatorStore.loadData</span><span class="PUNC">(</span><span class="NAME">operators</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>389</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>390</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>391</span>   </span><span class="COMM">/** updateFilter
<span class='linenumber'>392</span>     *
<span class='linenumber'>393</span>     */</span><span class="WHIT">
<span class='linenumber'>394</span>   </span><span class="NAME">updateFilter</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>395</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.column</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>396</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="NAME">e.record.get</span><span class="PUNC">(</span><span class="STRN">'filter'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>397</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operatorId</span><span class="PUNC">=</span><span class="NAME">e.record.get</span><span class="PUNC">(</span><span class="STRN">'operatorId'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>398</span>       </span><span class="NAME">filter.setOperator</span><span class="PUNC">(</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>399</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.column</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>400</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="NAME">e.record.get</span><span class="PUNC">(</span><span class="STRN">'filter'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>401</span>       </span><span class="KEYW">try</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>402</span>         </span><span class="NAME">filter.setValues</span><span class="PUNC">(</span><span class="NAME">e.record.get</span><span class="PUNC">(</span><span class="STRN">'value'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>403</span>       </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">exp</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>404</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">this.filterStore.getById</span><span class="PUNC">(</span><span class="NAME">filter.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>405</span>         </span><span class="NAME">r.set</span><span class="PUNC">(</span><span class="STRN">'value'</span><span class="PUNC">,</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>406</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>407</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>408</span>     </span><span class="NAME">this.filterStore.commitChanges</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>409</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>410</span>   </span><span class="COMM">/** updateFilterOperator
<span class='linenumber'>411</span>     *
<span class='linenumber'>412</span>     */</span><span class="WHIT">
<span class='linenumber'>413</span>   </span><span class="NAME">updateFilterOperator</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>414</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">=</span><span class="NAME">this.filterStore.getById</span><span class="PUNC">(</span><span class="NAME">filter.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>415</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'operatorId'</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>416</span>       </span><span class="NAME">record.set</span><span class="PUNC">(</span><span class="STRN">'operatorId'</span><span class="PUNC">,</span><span class="NAME">filter.getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>417</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>418</span>     </span><span class="NAME">this.filterStore.commitChanges</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>419</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>420</span>   </span><span class="COMM">/** updateFilterValues
<span class='linenumber'>421</span>     *
<span class='linenumber'>422</span>     */</span><span class="WHIT">
<span class='linenumber'>423</span>   </span><span class="NAME">updateFilterValues</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>424</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">=</span><span class="NAME">this.filterStore.getById</span><span class="PUNC">(</span><span class="NAME">filter.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>425</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'value'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>426</span>       </span><span class="NAME">record.set</span><span class="PUNC">(</span><span class="STRN">'value'</span><span class="PUNC">,</span><span class="NAME">filter.getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>427</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>428</span>     </span><span class="NAME">this.filterStore.commitChanges</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>429</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>430</span>   </span><span class="COMM">/** imageRenderer
<span class='linenumber'>431</span>     *
<span class='linenumber'>432</span>     */</span><span class="WHIT">
<span class='linenumber'>433</span>   </span><span class="NAME">imageRenderer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">metadata</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>434</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="STRN">'&lt;img class="x-menu-item-icon x-icon-delete" style="cursor: pointer" src="'</span><span class="PUNC">+</span><span class="NAME">Ext.BLANK_IMAGE_URL</span><span class="PUNC">+</span><span class="STRN">'"/>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>435</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>436</span>   </span><span class="COMM">/** fieldRenderer
<span class='linenumber'>437</span>     *
<span class='linenumber'>438</span>     */</span><span class="WHIT">
<span class='linenumber'>439</span>   </span><span class="NAME">fieldRenderer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">metadata</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>440</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">value.getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>441</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>442</span>   </span><span class="COMM">/** operatorRenderer
<span class='linenumber'>443</span>     *
<span class='linenumber'>444</span>     */</span><span class="WHIT">
<span class='linenumber'>445</span>   </span><span class="NAME">operatorRenderer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">metadata</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>446</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'filter'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAvailableOperatorById</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>447</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">operator.getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>448</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>449</span>   </span><span class="COMM">/** valueRenderer
<span class='linenumber'>450</span>     *
<span class='linenumber'>451</span>     */</span><span class="WHIT">
<span class='linenumber'>452</span>   </span><span class="NAME">valueRenderer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">metadata</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rowIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">colIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>453</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="STRN">'filter'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">render</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>454</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>455</span> 
<span class='linenumber'>456</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>457</span> </span><span class="NAME">Ext.reg</span><span class="PUNC">(</span><span class="STRN">'dynamicFilter'</span><span class="PUNC">,</span><span class="NAME">Ext.ux.netbox.core.DynamicFilterModelView</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>