<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='linenumber'>  1</span> <span class="COMM">// $Id: QuickFilterModelView.js 179 2008-09-10 13:29:44Z bobbicat71 $</span><span class="WHIT">
<span class='linenumber'>  2</span> 
<span class='linenumber'>  3</span> </span><span class="NAME">Ext.namespace</span><span class="PUNC">(</span><span class="STRN">'Ext.ux.netbox.core'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  4</span> 
<span class='linenumber'>  5</span> </span><span class="COMM">/** Create a new QuickFilterModelView.
<span class='linenumber'>  6</span>   * @class Provides a view on FilterModel and allows to quickly add filters directly from a grid using a context menu.
<span class='linenumber'>  7</span>   * In this way you right click on a cell of the grid (for example the cell containing the value "John" in the name column), a context menu appears,
<span class='linenumber'>  8</span>   * you select the operator from the context menu (for example "=") and a filter is added (name = "John"). &lt;br>
<span class='linenumber'>  9</span>   * &lt;b>NB&lt;/b> By default it will use the value in the store as value, and what returned by the renderer of the column as label
<span class='linenumber'> 10</span>   * Default operators are as follows, divided by datatype:&lt;p>&lt;em>
<span class='linenumber'> 11</span>   * &lt;b>String&lt;/b>: ['STRING_EQUAL','STRING_DIFFERENT']&lt;br>
<span class='linenumber'> 12</span>   * &lt;b>Enummerative&lt;/b>: ['STRING_EQUAL','STRING_DIFFERENT']&lt;br>
<span class='linenumber'> 13</span>   * &lt;b>Number&lt;/b>: ['NUMBER_EQUAL','NUMBER_NOT_EQUAL','NUMBER_GREATER','NUMBER_GREATER_OR_EQUAL','NUMBER_LESS','NUMBER_LESS_OR_EQUAL']&lt;br>
<span class='linenumber'> 14</span>   * &lt;b>Date&lt;/b>: ['DATE_EQUAL','DATE_GREATER','DATE_GREATER_OR_EQUAL','DATE_LESS','DATE_LESS_OR_EQUAL']&lt;/em>&lt;/p>
<span class='linenumber'> 15</span>   * You can define your own list of operators for each field in the config of the class.
<span class='linenumber'> 16</span>   * @constructor
<span class='linenumber'> 17</span>   * @extends Ext.util.Observable
<span class='linenumber'> 18</span>   * @param {Object} config An object which may contain the following properties:
<span class='linenumber'> 19</span>   * @config {Ext.ux.netbox.core.FilterModel} filterModel The FilterModel (mandatory) which is associated the QuickFilter.
<span class='linenumber'> 20</span>   * @config {Array of Object} fieldsOptions The options (otional) for configure the operators to show or add new custom getter function
<span class='linenumber'> 21</span>   * Each element of the array has the following fields:
<span class='linenumber'> 22</span>   * &lt;ul>
<span class='linenumber'> 23</span>   *   &lt;li> &lt;b>id:&lt;/b> &lt;em>id of the field&lt;/em>&lt;/li>
<span class='linenumber'> 24</span>   *   &lt;li> &lt;b>operators:&lt;/b> &lt;em>array of operators id. This is the set of operators available in the quick filter for the field&lt;/em>&lt;/li>
<span class='linenumber'> 25</span>   *   &lt;li> &lt;b>getterFn&lt;/b>: &lt;em>
<span class='linenumber'> 26</span>   *       function that, given the value in the grid, returns the value for the filter.
<span class='linenumber'> 27</span>   *       Usefull for example when the rendered value is totally different from the store value.
<span class='linenumber'> 28</span>   *       This function has the following attributes:
<span class='linenumber'> 29</span>   *       &lt;ul>
<span class='linenumber'> 30</span>   *         &lt;li>&lt;b>tableValue:&lt;/b> The value in the Store that is displayed in the cell of the grid&lt;/li>
<span class='linenumber'> 31</span>   *         &lt;li>&lt;b>fieldId:&lt;/b> The id of the field on which the elementary filter will be created&lt;/li>
<span class='linenumber'> 32</span>   *         &lt;li>&lt;b>operatorId:&lt;/b> The id of the operator choose by the user&lt;/li>
<span class='linenumber'> 33</span>   *         &lt;li>&lt;b>grid:&lt;/b> The grid on which the user clicked&lt;/li>
<span class='linenumber'> 34</span>   *         &lt;li>&lt;b>row:&lt;/b> the row on which the user clicked&lt;/li>
<span class='linenumber'> 35</span>   *         &lt;li>&lt;b>column:&lt;/b> the column on which the user clicked&lt;/li>
<span class='linenumber'> 36</span>   *       &lt;/ul>
<span class='linenumber'> 37</span>   *     &lt;/em>
<span class='linenumber'> 38</span>   *   &lt;/li>
<span class='linenumber'> 39</span>   * &lt;/ul>
<span class='linenumber'> 40</span>   * @config {boolean} duplicatedElementaryFiltersAllowed True to allow 2 equals elementary filter (i.e. to allow name='John' 2 times). Optional. Default false
<span class='linenumber'> 41</span>   * @config {boolean} isStatic True to use QuickFilter with StaticFilterModelView. Optional. Default false
<span class='linenumber'> 42</span>   * &lt;h4> Example &lt;/h4>
<span class='linenumber'> 43</span>   * &lt;pre>
<span class='linenumber'> 44</span>   * var quickFilter= new Ext.ux.netbox.core.QuickFilterModelView({
<span class='linenumber'> 45</span>   *   filterModel: filterModel,
<span class='linenumber'> 46</span>   *   //for the grid's column inPortfolio the value in the store is different from the rendered one....
<span class='linenumber'> 47</span>   *   fieldsOptions: [{
<span class='linenumber'> 48</span>   *     id: "inPortfolio",
<span class='linenumber'> 49</span>   *     getterFn: function(value,fieldId,operatorId,grid,row,column){
<span class='linenumber'> 50</span>   *       return([{
<span class='linenumber'> 51</span>   *         value: value,
<span class='linenumber'> 52</span>   *         label: inPortfolio(value)
<span class='linenumber'> 53</span>   *       }]);
<span class='linenumber'> 54</span>   *     }
<span class='linenumber'> 55</span>   *   }]
<span class='linenumber'> 56</span>   * });
<span class='linenumber'> 57</span>   * quickFilter.on("filterChanged",filterTable);
<span class='linenumber'> 58</span>   * var contextMenuManager=new Ext.ux.netbox.ContextMenuManager({menu: {items:[quickFilter.getFilterMenu(),quickFilter.getRemoveFilterMenu()]}});
<span class='linenumber'> 59</span>   * var grid = new Ext.grid.GridPanel({
<span class='linenumber'> 60</span>   *     store: ....,
<span class='linenumber'> 61</span>   *     columns: ....,
<span class='linenumber'> 62</span>   *     plugins: [contextMenuManager],
<span class='linenumber'> 63</span>   *   });
<span class='linenumber'> 64</span>   * &lt;/pre>
<span class='linenumber'> 65</span>   */</span><span class="WHIT">
<span class='linenumber'> 66</span> </span><span class="NAME">Ext.ux.netbox.core.QuickFilterModelView</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">config</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 67</span> 
<span class='linenumber'> 68</span>   </span><span class="NAME">this.addEvents</span><span class="PUNC">(</span><span class="COMM">/** @scope Ext.ux.netbox.core.QuickFilterModelView.prototype */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 69</span>     </span><span class="COMM">/** Fires when a quickFilter is added or removed
<span class='linenumber'> 70</span>       * @event filterChanged
<span class='linenumber'> 71</span>       */</span><span class="WHIT">
<span class='linenumber'> 72</span>     </span><span class="NAME">filterChanged</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT">
<span class='linenumber'> 73</span>   </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 74</span> 
<span class='linenumber'> 75</span>   </span><span class="NAME">this.filterModel</span><span class="PUNC">=</span><span class="NAME">config.filterModel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 76</span>   </span><span class="NAME">this.quickFilterItem</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 77</span>   </span><span class="NAME">this.removeFilterItem</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 78</span>   </span><span class="NAME">this.fieldsOptions</span><span class="PUNC">=</span><span class="NAME">config.fieldsOptions</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 79</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">config.duplicatedElementaryFiltersAllowed</span><span class="PUNC">===</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 80</span>     </span><span class="NAME">this.duplicatedElementaryFiltersAllowed</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 81</span>   </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 82</span>     </span><span class="NAME">this.duplicatedElementaryFiltersAllowed</span><span class="PUNC">=</span><span class="NAME">config.duplicatedElementaryFiltersAllowed</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 83</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 84</span>   </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">config.isStatic</span><span class="PUNC">===</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 85</span>     </span><span class="NAME">this.isStatic</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 86</span>   </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 87</span>     </span><span class="NAME">this.isStatic</span><span class="PUNC">=</span><span class="NAME">config.isStatic</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 88</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 89</span>   </span><span class="NAME">this.stringOperDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'STRING_EQUAL'</span><span class="PUNC">,</span><span class="STRN">'STRING_DIFFERENT'</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 90</span>   </span><span class="NAME">this.numberOperDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'NUMBER_EQUAL'</span><span class="PUNC">,</span><span class="STRN">'NUMBER_NOT_EQUAL'</span><span class="PUNC">,</span><span class="STRN">'NUMBER_GREATER'</span><span class="PUNC">,</span><span class="STRN">'NUMBER_GREATER_OR_EQUAL'</span><span class="PUNC">,</span><span class="STRN">'NUMBER_LESS'</span><span class="PUNC">,</span><span class="STRN">'NUMBER_LESS_OR_EQUAL'</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 91</span>   </span><span class="NAME">this.dateOperDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'DATE_EQUAL'</span><span class="PUNC">,</span><span class="STRN">'DATE_GREATER'</span><span class="PUNC">,</span><span class="STRN">'DATE_GREATER_OR_EQUAL'</span><span class="PUNC">,</span><span class="STRN">'DATE_LESS'</span><span class="PUNC">,</span><span class="STRN">'DATE_LESS_OR_EQUAL'</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 92</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 93</span> 
<span class='linenumber'> 94</span> </span><span class="NAME">Ext.extend</span><span class="PUNC">(</span><span class="NAME">Ext.ux.netbox.core.QuickFilterModelView</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Ext.util.Observable</span><span class="PUNC">,</span><span class="COMM">/** @scope Ext.ux.netbox.core.QuickFilterModelView.prototype */</span><span class="WHIT">
<span class='linenumber'> 95</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 96</span>   </span><span class="NAME">quickFilterText</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'QuickFilter'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 97</span>   </span><span class="NAME">removeText</span><span class="WHIT">        </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Remove filter'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 98</span>   </span><span class="NAME">removeAllText</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Remove all'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 99</span> 
<span class='linenumber'>100</span>   </span><span class="COMM">/** Creates menu items based on the operators set for the selected field
<span class='linenumber'>101</span>     * @private
<span class='linenumber'>102</span>     */</span><span class="WHIT">
<span class='linenumber'>103</span>   </span><span class="NAME">filterIsToShow</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>104</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">column</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.getField</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>105</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>106</span>     </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>107</span> 
<span class='linenumber'>108</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">itemsArray</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>109</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">this.getField</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>110</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">availableOperatorsId</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>111</span> 
<span class='linenumber'>112</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>113</span>         </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.fieldsOptions.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>114</span>           </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">===</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">operators</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>115</span>             </span><span class="NAME">availableOperatorsId</span><span class="PUNC">=</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">operators</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>116</span>           </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>117</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>118</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>119</span> 
<span class='linenumber'>120</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">availableOperatorsId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>121</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">field</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.string.StringField</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">field</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.string.EnumField</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>122</span>           </span><span class="NAME">availableOperatorsId</span><span class="PUNC">=</span><span class="NAME">this.stringOperDefault</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>123</span>         </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">field</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.number.NumberField</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>124</span>           </span><span class="NAME">availableOperatorsId</span><span class="PUNC">=</span><span class="NAME">this.numberOperDefault</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>125</span>         </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">field</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.date.DateField</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>126</span>           </span><span class="NAME">availableOperatorsId</span><span class="PUNC">=</span><span class="NAME">this.dateOperDefault</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>127</span>         </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>128</span>           </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">availableOperators</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">field.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>129</span>           </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">availableOperators.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>130</span>             </span><span class="NAME">availableOperatorsId.push</span><span class="PUNC">(</span><span class="NAME">availableOperators</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>131</span>           </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>132</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>133</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>134</span> 
<span class='linenumber'>135</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">availableOperatorsId.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>136</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isToAdd</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>137</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">field.getAvailableOperatorById</span><span class="PUNC">(</span><span class="NAME">availableOperatorsId</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>138</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filterItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>139</span>           </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">Ext.util.Format.htmlEncode</span><span class="PUNC">(</span><span class="NAME">operator.getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>140</span>           </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.setFilter.createDelegate</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">,</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">operator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>141</span>         </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>142</span> 
<span class='linenumber'>143</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filtersList</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getElementaryFiltersByFieldId</span><span class="PUNC">(</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>144</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">=</span><span class="NAME">this.getValues</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">,</span><span class="NAME">field.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">operator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>145</span>         </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">j</span><span class="PUNC">&lt;</span><span class="NAME">filtersList.length</span><span class="PUNC">;</span><span class="NAME">j</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>146</span>           </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">filtersList</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="NAME">operator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT">
<span class='linenumber'>147</span>           </span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">filtersList</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>148</span>             </span><span class="NAME">isToAdd</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>149</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>150</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">operator.validate</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>151</span>           </span><span class="NAME">isToAdd</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>152</span> 
<span class='linenumber'>153</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">isToAdd</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>154</span>           </span><span class="NAME">itemsArray.push</span><span class="PUNC">(</span><span class="NAME">filterItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>155</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>156</span> 
<span class='linenumber'>157</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">itemsArray.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>158</span>         </span><span class="NAME">this.quickFilterItem.setSubMenu</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.menu.Menu</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">itemsArray</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>159</span>         </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>160</span>       </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>161</span>         </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>162</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>163</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>164</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>165</span> 
<span class='linenumber'>166</span>   </span><span class="COMM">/**
<span class='linenumber'>167</span>     * @private
<span class='linenumber'>168</span>     */</span><span class="WHIT">
<span class='linenumber'>169</span>   </span><span class="NAME">getValues</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">,</span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>170</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">=</span><span class="NAME">grid.getStore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAt</span><span class="PUNC">(</span><span class="NAME">row</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>171</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tableValue</span><span class="PUNC">=</span><span class="NAME">record.get</span><span class="PUNC">(</span><span class="NAME">grid.getColumnModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDataIndex</span><span class="PUNC">(</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>172</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">getterFn</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>173</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">getterScope</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>174</span> 
<span class='linenumber'>175</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>176</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">this.fieldsOptions.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>177</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">===</span><span class="NAME">fieldId</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getterFn</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>178</span>           </span><span class="NAME">getterFn</span><span class="PUNC">=</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getterFn</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>179</span>           </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getterScope</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>180</span>             </span><span class="NAME">getterScope</span><span class="PUNC">=</span><span class="NAME">this.fieldsOptions</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getterScope</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>181</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>182</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>183</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>184</span> 
<span class='linenumber'>185</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">getterFn</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>186</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">this.getField</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>187</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">field.getAvailableOperatorById</span><span class="PUNC">(</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>188</span> 
<span class='linenumber'>189</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">operator</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.date.DateOperator</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tableValue</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>190</span>         </span><span class="NAME">getterFn</span><span class="PUNC">=</span><span class="NAME">this.getValuesDate</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>191</span>       </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>192</span>         </span><span class="NAME">getterFn</span><span class="PUNC">=</span><span class="NAME">this.getValuesOther</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>193</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>194</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>195</span> 
<span class='linenumber'>196</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">getterScope</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>197</span>       </span><span class="NAME">getterScope</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>198</span> 
<span class='linenumber'>199</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">=</span><span class="NAME">getterFn.call</span><span class="PUNC">(</span><span class="NAME">getterScope</span><span class="PUNC">,</span><span class="NAME">tableValue</span><span class="PUNC">,</span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">,</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>200</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>201</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>202</span> 
<span class='linenumber'>203</span>   </span><span class="COMM">/** Default getter. Returns the values formatted.
<span class='linenumber'>204</span>     * @private
<span class='linenumber'>205</span>     */</span><span class="WHIT">
<span class='linenumber'>206</span>   </span><span class="NAME">getValuesOther</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">tableValue</span><span class="PUNC">,</span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">,</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>207</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rendererFn</span><span class="PUNC">=</span><span class="NAME">grid.getColumnModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getRenderer</span><span class="PUNC">(</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>208</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">record</span><span class="PUNC">=</span><span class="NAME">grid.getStore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getAt</span><span class="PUNC">(</span><span class="NAME">row</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>209</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">label</span><span class="PUNC">=</span><span class="NAME">rendererFn</span><span class="PUNC">(</span><span class="NAME">tableValue</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">record</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">,</span><span class="NAME">grid.getStore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>210</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">label</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">label</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tableValue</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>211</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>212</span> 
<span class='linenumber'>213</span>   </span><span class="COMM">/** Default getter for dates. Returns the values formatted, only for dates.
<span class='linenumber'>214</span>     * @private
<span class='linenumber'>215</span>     */</span><span class="WHIT">
<span class='linenumber'>216</span>   </span><span class="NAME">getValuesDate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">tableValue</span><span class="PUNC">,</span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">,</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>217</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getFieldById</span><span class="PUNC">(</span><span class="NAME">fieldId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>218</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">field.getAvailableOperatorById</span><span class="PUNC">(</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>219</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">label</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tableValue.format</span><span class="PUNC">(</span><span class="NAME">operator.getFormat</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tableValue.format</span><span class="PUNC">(</span><span class="STRN">'Y-m-d H:i:s'</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>220</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>221</span> 
<span class='linenumber'>222</span>   </span><span class="COMM">/** Method that takes care of the filter set on filterModel when selecting a menu item.
<span class='linenumber'>223</span>     * @private
<span class='linenumber'>224</span>     */</span><span class="WHIT">
<span class='linenumber'>225</span>   </span><span class="NAME">setFilter</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">,</span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>226</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">=</span><span class="NAME">this.getValues</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">,</span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>227</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filterObject</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">fieldId</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">fieldId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">operatorId</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">operatorId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">values</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>228</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">addFilter</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>229</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.duplicatedElementaryFiltersAllowed</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>230</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilters</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getElementaryFiltersByFieldId</span><span class="PUNC">(</span><span class="NAME">fieldId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>231</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">elementaryFilters.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>232</span>         </span><span class="COMM">//quick way to compare 2 filters</span><span class="WHIT">
<span class='linenumber'>233</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">elementaryFilters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="NAME">operatorId</span><span class="WHIT">
<span class='linenumber'>234</span>           </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">elementaryFilters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="NAME">Ext.util.JSON.encode</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>235</span>             </span><span class="NAME">addFilter</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>236</span>             </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>237</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>238</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>239</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>240</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isStatic</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>241</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementaryFilters</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getElementaryFiltersByFieldId</span><span class="PUNC">(</span><span class="NAME">fieldId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>242</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">elementaryFilters.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>243</span>         </span><span class="NAME">this.filterModel.removeElementaryFilterById</span><span class="PUNC">(</span><span class="NAME">elementaryFilters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>244</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>245</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>246</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">addFilter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>247</span>       </span><span class="NAME">this.filterModel.addElementaryFilter</span><span class="PUNC">(</span><span class="NAME">filterObject</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>248</span>       </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">'filterChanged'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>249</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>250</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>251</span> 
<span class='linenumber'>252</span>   </span><span class="COMM">/** Returns a menu item containing the operators available for the selected field,
<span class='linenumber'>253</span>     * which corresponds to one of the columns of the grid.
<span class='linenumber'>254</span>     * @return (Ext.ux.netbox.ContainerMenuItem)
<span class='linenumber'>255</span>     */</span><span class="WHIT">
<span class='linenumber'>256</span>   </span><span class="NAME">getFilterMenu</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>257</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.quickFilterItem</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>258</span>       </span><span class="NAME">this.quickFilterItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.ContainerMenuItem</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>259</span>         </span><span class="NAME">text</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.quickFilterText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>260</span>         </span><span class="NAME">isToShow</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.filterIsToShow</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>261</span>         </span><span class="NAME">scope</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>262</span>       </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>263</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>264</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.quickFilterItem</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>266</span> 
<span class='linenumber'>267</span>   </span><span class="COMM">/** Returns a menu item containing the operators to be removed,
<span class='linenumber'>268</span>     * in a contextual way to the column of the selected cell.
<span class='linenumber'>269</span>     * @return (Ext.ux.netbox.ContainerMenuItem)
<span class='linenumber'>270</span>     */</span><span class="WHIT">
<span class='linenumber'>271</span>   </span><span class="NAME">getRemoveFilterMenu</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>272</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.removeFilterItem</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>273</span>       </span><span class="NAME">this.removeFilterItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.ContainerMenuItem</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>274</span>         </span><span class="NAME">text</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.removeText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>275</span>         </span><span class="NAME">isToShow</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.removeFilterIsToShow</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>276</span>         </span><span class="NAME">scope</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>277</span>       </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>278</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>279</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.removeFilterItem</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>280</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>281</span> 
<span class='linenumber'>282</span>   </span><span class="COMM">/** Creates menu items based on the operators to be removed, for the selected field.
<span class='linenumber'>283</span>     * @private
<span class='linenumber'>284</span>     */</span><span class="WHIT">
<span class='linenumber'>285</span>   </span><span class="NAME">removeFilterIsToShow</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">row</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>286</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filters</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getAllElementaryFilters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>287</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">filters.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>288</span> 
<span class='linenumber'>289</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">itemsArray</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>290</span> 
<span class='linenumber'>291</span>       </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">filters.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>292</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">label</span><span class="PUNC">=</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">' '</span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">' '</span><span class="PUNC">+</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getOperator</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">render</span><span class="PUNC">(</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>293</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">iconCls</span><span class="PUNC">=</span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>294</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isValid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>295</span>           </span><span class="NAME">iconCls</span><span class="PUNC">=</span><span class="STRN">'x-icon-invalid'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>296</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filterItem</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>297</span>           </span><span class="NAME">iconCls</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">iconCls</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>298</span>           </span><span class="NAME">text</span><span class="WHIT">     </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">label</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>299</span>           </span><span class="NAME">handler</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.removeFilterById.createDelegate</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">filters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>300</span>           </span><span class="NAME">isToShow</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>301</span>         </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>302</span>         </span><span class="NAME">itemsArray.push</span><span class="PUNC">(</span><span class="NAME">filterItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>303</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>304</span> 
<span class='linenumber'>305</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">removeAllFilterItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>306</span>         </span><span class="NAME">text</span><span class="WHIT">    </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.removeAllText</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>307</span>         </span><span class="NAME">handler</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.removeAllFilters</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>308</span>         </span><span class="NAME">scope</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>309</span>         </span><span class="NAME">isToShow</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>310</span>       </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>311</span>       </span><span class="NAME">itemsArray.push</span><span class="PUNC">(</span><span class="NAME">removeAllFilterItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>312</span> 
<span class='linenumber'>313</span>       </span><span class="NAME">this.removeFilterItem.setSubMenu</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.menu.Menu</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">items</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">itemsArray</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>314</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>315</span>     </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>316</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>317</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>318</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>319</span> 
<span class='linenumber'>320</span>   </span><span class="COMM">/** Removes all filters set on the filterModel.
<span class='linenumber'>321</span>     * @private
<span class='linenumber'>322</span>     */</span><span class="WHIT">
<span class='linenumber'>323</span>   </span><span class="NAME">removeAllFilters</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>324</span>     </span><span class="NAME">this.filterModel.setFilterObj</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>325</span>     </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">'filterChanged'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>326</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>327</span> 
<span class='linenumber'>328</span>   </span><span class="COMM">/** Removes one filter by id from the filterModel.
<span class='linenumber'>329</span>     * @private
<span class='linenumber'>330</span>     */</span><span class="WHIT">
<span class='linenumber'>331</span>   </span><span class="NAME">removeFilterById</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">filterId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>332</span>     </span><span class="NAME">this.filterModel.removeElementaryFilterById</span><span class="PUNC">(</span><span class="NAME">filterId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>333</span>     </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">'filterChanged'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>334</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>335</span> 
<span class='linenumber'>336</span>   </span><span class="COMM">/** Returns the field for the given grid and column.
<span class='linenumber'>337</span>     * @private
<span class='linenumber'>338</span>     * @ignore
<span class='linenumber'>339</span>     */</span><span class="WHIT">
<span class='linenumber'>340</span>   </span><span class="NAME">getField</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">grid</span><span class="PUNC">,</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>341</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">columnId</span><span class="PUNC">=</span><span class="NAME">grid.getColumnModel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDataIndex</span><span class="PUNC">(</span><span class="NAME">column</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>342</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">=</span><span class="NAME">this.filterModel.getFieldManager</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getFieldById</span><span class="PUNC">(</span><span class="NAME">columnId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">field</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>344</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>345</span> 
<span class='linenumber'>346</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>