<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='linenumber'>  1</span> <span class="COMM">// $Id: Field.js 184 2008-09-19 15:05:19Z bobbicat71 $</span><span class="WHIT">
<span class='linenumber'>  2</span> 
<span class='linenumber'>  3</span> </span><span class="NAME">Ext.namespace</span><span class="PUNC">(</span><span class="STRN">'Ext.ux.netbox.core'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  4</span> 
<span class='linenumber'>  5</span> </span><span class="COMM">/** Implements the field class.
<span class='linenumber'>  6</span>   * @constructor
<span class='linenumber'>  7</span>   * @param {String} id The field id.
<span class='linenumber'>  8</span>   * @param {String} label The label of the filter. If not supplied the id is used. Optional
<span class='linenumber'>  9</span>   * @class A field is an item on whch I want to perform filter operations.
<span class='linenumber'> 10</span>   * For example if I have a grid with a column 'Price' and I want to filter on the price column, surelly I have a filter on the price column.
<span class='linenumber'> 11</span>   * In a filter the operators available are defined (for example, on the Price column I want only to have the =, and > operators. The Price field will have these 2 operators.
<span class='linenumber'> 12</span>   * Among all the operators there is an operator of default, that will be used as default when a new elementary filter is instantiated.
<span class='linenumber'> 13</span>   * A field can have a list of available values, a default way to render and editor for the values of the elementary filters and so on.
<span class='linenumber'> 14</span>   * Usually you should not instantiate a field directly, but the Ext.ux.netbox.core.FieldManager (or directly the Ext.ux.netbox.core.FieldModel) instantiates them.
<span class='linenumber'> 15</span>   */</span><span class="WHIT">
<span class='linenumber'> 16</span> </span><span class="NAME">Ext.ux.netbox.core.Field</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="NAME">labelIn</span><span class="PUNC">,</span><span class="NAME">defaultValues</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 17</span>   </span><span class="NAME">Ext.ux.netbox.core.Field.superclass.constructor.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 18</span>   </span><span class="NAME">this.addEvents</span><span class="PUNC">(</span><span class="COMM">/** @scope Ext.ux.netbox.core.Field.prototype */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 19</span>     </span><span class="COMM">/** Fires when a operator is added
<span class='linenumber'> 20</span>       * @event operatorAdded
<span class='linenumber'> 21</span>       * @param {Ext.ux.netbox.core.Operator} operator The added operator
<span class='linenumber'> 22</span>       */</span><span class="WHIT">
<span class='linenumber'> 23</span>     </span><span class="NAME">operatorAdded</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 24</span>     </span><span class="COMM">/** Fires when a operator is removed
<span class='linenumber'> 25</span>       * @event operatorRemoved
<span class='linenumber'> 26</span>       * @param {Ext.ux.netbox.core.Operator} operator The removed operator
<span class='linenumber'> 27</span>       */</span><span class="WHIT">
<span class='linenumber'> 28</span>     </span><span class="NAME">operatorRemoved</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 29</span>     </span><span class="COMM">/** Fires when a defaultOperator is changed
<span class='linenumber'> 30</span>       * @event defaultOperatorChanged
<span class='linenumber'> 31</span>       * @param {Ext.ux.netbox.core.Operator} defaultOperator The changed defaultOperator
<span class='linenumber'> 32</span>       */</span><span class="WHIT">
<span class='linenumber'> 33</span>     </span><span class="NAME">defaultOperatorChanged</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT">
<span class='linenumber'> 34</span>   </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 35</span>   </span><span class="COMM">/** The id of this Field
<span class='linenumber'> 36</span>     * @type String
<span class='linenumber'> 37</span>     * @private
<span class='linenumber'> 38</span>     */</span><span class="WHIT">
<span class='linenumber'> 39</span>   </span><span class="NAME">this.id</span><span class="PUNC">=</span><span class="NAME">id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 40</span>   </span><span class="COMM">/** The label of this Field
<span class='linenumber'> 41</span>     * @property {String} label
<span class='linenumber'> 42</span>     * @private
<span class='linenumber'> 43</span>     */</span><span class="WHIT">
<span class='linenumber'> 44</span>   </span><span class="NAME">this.label</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">labelIn</span><span class="PUNC">===</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">labelIn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 45</span>   </span><span class="COMM">/** The list of all the available operators for this Field
<span class='linenumber'> 46</span>     * @property {Array of Ext.ux.netbox.core.Operator} availableOperators
<span class='linenumber'> 47</span>     * @private
<span class='linenumber'> 48</span>     */</span><span class="WHIT">
<span class='linenumber'> 49</span>   </span><span class="NAME">this.availableOperators</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 50</span>   </span><span class="COMM">/** The default operator for this Field
<span class='linenumber'> 51</span>     * @property {Ext.ux.netbox.core.Operator} defaultOperator
<span class='linenumber'> 52</span>     * @private
<span class='linenumber'> 53</span>     */</span><span class="WHIT">
<span class='linenumber'> 54</span>   </span><span class="NAME">this.defaultOperator</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 55</span>   </span><span class="COMM">/** The editor used to edit the value of an elementary filter based on this Field,
<span class='linenumber'> 56</span>     * when the operator doesn't provide a specialized implementation.
<span class='linenumber'> 57</span>     * @private
<span class='linenumber'> 58</span>     */</span><span class="WHIT">
<span class='linenumber'> 59</span>   </span><span class="NAME">this.editor</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 60</span>   </span><span class="COMM">/** The Store or array used to obtain the list of the available values.
<span class='linenumber'> 61</span>     * It must contain a value field and a label field.
<span class='linenumber'> 62</span>     * Example:&lt;PRE>
<span class='linenumber'> 63</span>     * var store = new Ext.data.SimpleStore({
<span class='linenumber'> 64</span>     * fields: ['label', 'value'],
<span class='linenumber'> 65</span>     * data : exampleData
<span class='linenumber'> 66</span>     * });&lt;/PRE>
<span class='linenumber'> 67</span>     * &lt;B>NB:&lt;/B> Both fields must be strings
<span class='linenumber'> 68</span>     * @property {Ext.data.Store} availableValueStore
<span class='linenumber'> 69</span>     * @private
<span class='linenumber'> 70</span>     */</span><span class="WHIT">
<span class='linenumber'> 71</span>   </span><span class="NAME">this.availableValueStore</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 72</span>   </span><span class="COMM">/** This value says if the store used to obtain the availableValues uses remote or local data
<span class='linenumber'> 73</span>     * If true it uses remote data, if false it uses local data. The default is true.
<span class='linenumber'> 74</span>     * @property {boolean} isRemote
<span class='linenumber'> 75</span>     * @private
<span class='linenumber'> 76</span>     */</span><span class="WHIT">
<span class='linenumber'> 77</span>   </span><span class="NAME">this.isRemote</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 78</span>   </span><span class="COMM">/** This value says if the store is always to reload.
<span class='linenumber'> 79</span>     * If true it reloads data everytime expanding the combo, if false it loads once. The default is false.
<span class='linenumber'> 80</span>     * @property {boolean} forceReload
<span class='linenumber'> 81</span>     * @private
<span class='linenumber'> 82</span>     */</span><span class="WHIT">
<span class='linenumber'> 83</span>   </span><span class="NAME">this.forceReload</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 84</span>   </span><span class="COMM">/** This attribute says if the value should be compared with the store's one with case sensitive. The default is true.
<span class='linenumber'> 85</span>     * @property {boolean} caseSensitive
<span class='linenumber'> 86</span>     * @private
<span class='linenumber'> 87</span>     */</span><span class="WHIT">
<span class='linenumber'> 88</span>   </span><span class="COMM">//this.caseSensitive=true;</span><span class="WHIT">
<span class='linenumber'> 89</span>   </span><span class="COMM">/** The default values of this Field. Optional.
<span class='linenumber'> 90</span>     * @property {Array} defaultValues
<span class='linenumber'> 91</span>     * @private
<span class='linenumber'> 92</span>     */</span><span class="WHIT">
<span class='linenumber'> 93</span>   </span><span class="NAME">this.defaultValues</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">defaultValues</span><span class="PUNC">==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">defaultValues</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 94</span>   </span><span class="COMM">/** The validate function of this Field. Optional.
<span class='linenumber'> 95</span>     * @property {function} validateFunc
<span class='linenumber'> 96</span>     * @private
<span class='linenumber'> 97</span>     */</span><span class="WHIT">
<span class='linenumber'> 98</span>   </span><span class="NAME">this.validateFunc</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 99</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>100</span> 
<span class='linenumber'>101</span> </span><span class="NAME">Ext.extend</span><span class="PUNC">(</span><span class="NAME">Ext.ux.netbox.core.Field</span><span class="PUNC">,</span><span class="NAME">Ext.util.Observable</span><span class="PUNC">,</span><span class="COMM">/** @scope Ext.ux.netbox.core.Field.prototype */</span><span class="WHIT">
<span class='linenumber'>102</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>103</span>   </span><span class="COMM">/** This attribute says if the value should be compared with the store's one with case sensitive. The default is true.
<span class='linenumber'>104</span>     * @property {boolean} caseSensitive
<span class='linenumber'>105</span>     * @private
<span class='linenumber'>106</span>     */</span><span class="WHIT">
<span class='linenumber'>107</span>     </span><span class="NAME">caseSensitive</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>108</span>   </span><span class="COMM">/** This method returns the default values for this Field.
<span class='linenumber'>109</span>     * @return {Array} The default values for this Field
<span class='linenumber'>110</span>     */</span><span class="WHIT">
<span class='linenumber'>111</span>   </span><span class="NAME">getDefaultValues</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>112</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.defaultValues</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>113</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>114</span>   </span><span class="COMM">/** This method sets the default values for this Field.
<span class='linenumber'>115</span>     * @param {Array} values The default values for this Field
<span class='linenumber'>116</span>     */</span><span class="WHIT">
<span class='linenumber'>117</span>   </span><span class="NAME">setDefaultValues</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>118</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">arrayValues</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>119</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">values.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>120</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">label</span><span class="PUNC">==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>121</span>         </span><span class="NAME">values</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">label</span><span class="PUNC">=</span><span class="NAME">values</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>122</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>123</span>       </span><span class="NAME">arrayValues.push</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>124</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>125</span>     </span><span class="NAME">this.defaultValues</span><span class="PUNC">=</span><span class="NAME">arrayValues</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>126</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>127</span>   </span><span class="COMM">/** This method returns the default operator for this Field.
<span class='linenumber'>128</span>     * Before the setDefaultOperator method is called it returns null.
<span class='linenumber'>129</span>     * @return {Ext.ux.netbox.core.Operator} The default operator for this Field
<span class='linenumber'>130</span>     */</span><span class="WHIT">
<span class='linenumber'>131</span>   </span><span class="NAME">getDefaultOperator</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>132</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.defaultOperator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>133</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>134</span>   </span><span class="COMM">/** This method sets the default operator for this Field.
<span class='linenumber'>135</span>     * The default operator must be among the operators of this Field. If not an exception is thrown.
<span class='linenumber'>136</span>     * If this succeeds the event "defaultOperatorChanged" is triggered.
<span class='linenumber'>137</span>     * @param {Ext.ux.netbox.core.Operator} defaultOperator The default operator for this Field
<span class='linenumber'>138</span>     */</span><span class="WHIT">
<span class='linenumber'>139</span>   </span><span class="NAME">setDefaultOperator</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">defaultOperator</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>140</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">=</span><span class="NAME">defaultOperator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>141</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">oper</span><span class="PUNC">=</span><span class="NAME">this.getAvailableOperatorById</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>142</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">oper</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>143</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"operator not among available operators"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>144</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>145</span>     </span><span class="NAME">this.defaultOperator</span><span class="PUNC">=</span><span class="NAME">defaultOperator</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>146</span>     </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">"defaultOperatorChanged"</span><span class="PUNC">,</span><span class="NAME">defaultOperator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>147</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>148</span>   </span><span class="COMM">/** Returns the array or store used to obtain the list of available values for this Field.
<span class='linenumber'>149</span>     * In this base class it throws an exception since isAvailableValuesAvailable always returns false
<span class='linenumber'>150</span>     * @return {Ext.data.Store} The store used to obtain the available values
<span class='linenumber'>151</span>     * @throws {String} If isAvailableValuesAvailable returns false this method throws an Exception
<span class='linenumber'>152</span>     */</span><span class="WHIT">
<span class='linenumber'>153</span>   </span><span class="NAME">getAvailableValues</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>154</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.isAvailableValuesAvailable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>155</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"Available values not available!"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>156</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>157</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.availableValueStore</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>158</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>159</span>   </span><span class="COMM">/** This method sets the store or Array of the available values.
<span class='linenumber'>160</span>     * If the value is not null, isAvailableValuesAvailable values available will return true
<span class='linenumber'>161</span>     * The store must contain a value field and a label field.
<span class='linenumber'>162</span>     * Example: &lt;PRE>
<span class='linenumber'>163</span>     * var store = new Ext.data.SimpleStore({
<span class='linenumber'>164</span>     * fields: ['label', 'value'],
<span class='linenumber'>165</span>     * data : exampleData
<span class='linenumber'>166</span>     * });&lt;/PRE>
<span class='linenumber'>167</span>     * @param {Ext.ux.Store} store The store used to obtain the available values
<span class='linenumber'>168</span>     */</span><span class="WHIT">
<span class='linenumber'>169</span>   </span><span class="NAME">setAvailableValues</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">store</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>170</span>     </span><span class="NAME">this.availableValueStore</span><span class="PUNC">=</span><span class="NAME">store</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>171</span>     </span><span class="NAME">this.editor</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>172</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>173</span>   </span><span class="COMM">/** It says if there is a list of available values.
<span class='linenumber'>174</span>     * In this implementation it returns false if the setAvailableValues was not called with a Store or Array,
<span class='linenumber'>175</span>     * or if the last time you called it, the passed value is different from null
<span class='linenumber'>176</span>     * @return {boolean} true if the operator supports a list of available values, false otherwise
<span class='linenumber'>177</span>     */</span><span class="WHIT">
<span class='linenumber'>178</span>   </span><span class="NAME">isAvailableValuesAvailable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>179</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.availableValueStore</span><span class="PUNC">!==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>180</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>181</span>   </span><span class="COMM">/** This method is used to set a variable that says if the store of the available values is local or remote.
<span class='linenumber'>182</span>     * If isAvailableValuesAvailable returns false the value is ignored. The default is true.
<span class='linenumber'>183</span>     * &lt;B>NB:&lt;/B> This method is used to instantiate the editor, and this happens on the first edit.
<span class='linenumber'>184</span>     * After this moment every change in the parameter is ignored
<span class='linenumber'>185</span>     * @param {boolean} isRemote True if the store is remote, false otherwise
<span class='linenumber'>186</span>     */</span><span class="WHIT">
<span class='linenumber'>187</span>   </span><span class="NAME">setStoreRemote</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">isRemote</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>188</span>     </span><span class="NAME">this.isRemote</span><span class="PUNC">=</span><span class="NAME">isRemote</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>189</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>190</span>   </span><span class="COMM">/** This method returns a value that says if the store of the available values is local or remote.
<span class='linenumber'>191</span>     * If it returns true the store fetches data from remote, if it returns false the store uses local data.
<span class='linenumber'>192</span>     * If isAvailableValuesAvailable returns false, the method throws an exception.
<span class='linenumber'>193</span>     * @return {boolean} True if the store fetches data from remote, false otherwise
<span class='linenumber'>194</span>     * @throws {String} If isAvailableValuesAvailable returns false this method throws an exception
<span class='linenumber'>195</span>     */</span><span class="WHIT">
<span class='linenumber'>196</span>   </span><span class="NAME">isStoreRemote</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>197</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.isAvailableValuesAvailable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>198</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="NAME">this.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" isStoreRemote: no store available"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>199</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>200</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.isRemote</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>201</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>202</span>   </span><span class="COMM">/** Sets the attribute that decides forced reloading of store.
<span class='linenumber'>203</span>     * @param {boolean} forceReload True if the store is always to reload, false otherwise
<span class='linenumber'>204</span>     */</span><span class="WHIT">
<span class='linenumber'>205</span>   </span><span class="NAME">setForceReload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">forceReload</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>206</span>     </span><span class="NAME">this.forceReload</span><span class="PUNC">=</span><span class="NAME">forceReload</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>207</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>208</span>   </span><span class="COMM">/** Returns true if the store is always to reload. Default is false.
<span class='linenumber'>209</span>     * @return {boolean} True if the store is always to reload, false otherwise
<span class='linenumber'>210</span>     * @throws {String} If isAvailableValuesAvailable returns false this method throws an exception
<span class='linenumber'>211</span>     */</span><span class="WHIT">
<span class='linenumber'>212</span>   </span><span class="NAME">isForceReload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>213</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.isAvailableValuesAvailable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>214</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="NAME">this.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" isForceReload: no store available"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>215</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>216</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.forceReload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>217</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>218</span>   </span><span class="COMM">/** Set the attribute that decide whether the added value should be compared with case sensitive.
<span class='linenumber'>219</span>     * @param {boolean} caseSensitive True if the value should be compared with the store's one with case sensitive, false otherwise
<span class='linenumber'>220</span>     */</span><span class="WHIT">
<span class='linenumber'>221</span>   </span><span class="NAME">setCaseSensitive</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">caseSensitive</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>222</span>     </span><span class="NAME">this.caseSensitive</span><span class="PUNC">=</span><span class="NAME">caseSensitive</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>223</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>224</span>   </span><span class="COMM">/** Returns true if the added value should be compared with case sensitive. Default is false.
<span class='linenumber'>225</span>     * @return {boolean} True if the value should be compared with the store's one with case sensitive, false otherwise
<span class='linenumber'>226</span>     * @throws {String} If isAvailableValuesAvailable returns false this method throws an exception
<span class='linenumber'>227</span>     */</span><span class="WHIT">
<span class='linenumber'>228</span>   </span><span class="NAME">isCaseSensitive</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>229</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.isAvailableValuesAvailable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>230</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="NAME">this.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" isCaseSensitive: no store available"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>231</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>232</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.caseSensitive</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>233</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>234</span>   </span><span class="COMM">/** Add a operator to the list of available operator.
<span class='linenumber'>235</span>     * If this succeeds the event "operatorAdded" is triggered.
<span class='linenumber'>236</span>     * If the Field of the operator is not null and different that this one an exception is thrown.
<span class='linenumber'>237</span>     * @param {Ext.ux.netbox.core.Operator} operator. The operator to add
<span class='linenumber'>238</span>     * @throw {String} If the operator is already associated to a different filter type
<span class='linenumber'>239</span>     */</span><span class="WHIT">
<span class='linenumber'>240</span>   </span><span class="NAME">addOperator</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>241</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">operator.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">operator.getField</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>242</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"Impossible to add the operator "</span><span class="PUNC">+</span><span class="NAME">operator.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" to the Field "</span><span class="PUNC">+</span><span class="NAME">this.getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">". The operator is already associated to another Field"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>243</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>244</span>     </span><span class="NAME">this.availableOperators.push</span><span class="PUNC">(</span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>245</span>     </span><span class="NAME">operator.setField</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>246</span>     </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">"operatorAdded"</span><span class="PUNC">,</span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>247</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>248</span>   </span><span class="COMM">/** This method returns the list of the available operators.
<span class='linenumber'>249</span>     * @return {Array} An array containing all the available operators.
<span class='linenumber'>250</span>     * If no operator is available it returns an empty array
<span class='linenumber'>251</span>     */</span><span class="WHIT">
<span class='linenumber'>252</span>   </span><span class="NAME">getAvailableOperators</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>253</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.availableOperators</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>254</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>255</span>   </span><span class="COMM">/**This method returns the operator by Id.
<span class='linenumber'>256</span>     * @param {String} id The id of the operator
<span class='linenumber'>257</span>     * @return {Ext.ux.netbox.core.Operator} The operator with the given id or null if no operator is found
<span class='linenumber'>258</span>     */</span><span class="WHIT">
<span class='linenumber'>259</span>   </span><span class="NAME">getAvailableOperatorById</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>260</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">=</span><span class="NAME">this._getOperatorIndexById</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>261</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">===</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>262</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>263</span>     </span><span class="KEYW">else</span><span class="WHIT">
<span class='linenumber'>264</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">index</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>266</span>   </span><span class="COMM">/** Search an operator and returns the index.
<span class='linenumber'>267</span>     * @param {String} id The id of the operator to search
<span class='linenumber'>268</span>     * @return {int} The index of the operator with the given id, or null if the operator doesn't exists
<span class='linenumber'>269</span>     * @private
<span class='linenumber'>270</span>     */</span><span class="WHIT">
<span class='linenumber'>271</span>   </span><span class="NAME">_getOperatorIndexById</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>272</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">availableOps</span><span class="PUNC">=</span><span class="NAME">this.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>273</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">availableOps.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>274</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">availableOps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>275</span>         </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>276</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>277</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>278</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>279</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>280</span>   </span><span class="COMM">/** This method remove an operator from the list of the operators.
<span class='linenumber'>281</span>     * If this succeeds the event "operatorRemoved" is triggered. Is not possible to remove the defaultOperator.
<span class='linenumber'>282</span>     * @param {String} id The id of the operator to remove
<span class='linenumber'>283</span>     * @throws {String} If the operator to remove is the defaultOperator
<span class='linenumber'>284</span>     * @throws {String} If the operator with the given id is not found
<span class='linenumber'>285</span>     */</span><span class="WHIT">
<span class='linenumber'>286</span>   </span><span class="NAME">removeOperator</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>287</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">=</span><span class="NAME">this._getOperatorIndexById</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>288</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">===</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>289</span>       </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"The operator with the given id doesn't exist"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>290</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>291</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">operator</span><span class="PUNC">=</span><span class="NAME">this.getAvailableOperators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">index</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>292</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">operator</span><span class="PUNC">==</span><span class="NAME">this.getDefaultOperator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>293</span>         </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"operator to remove is the DefaultOperator"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>294</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>295</span>       </span><span class="NAME">this.availableOperators.splice</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>296</span>       </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="STRN">"operatorRemoved"</span><span class="PUNC">,</span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>297</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>298</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>299</span>   </span><span class="COMM">/** This method returns an elementaryFilter's instance of the type of this Field.
<span class='linenumber'>300</span>     * The operator of the elementaryFilter is the default operator of this Field.
<span class='linenumber'>301</span>     * @param {Ext.ux.netbox.core.Operator} operator The operator to set on the filter. Optional. As defult the default operator is used.
<span class='linenumber'>302</span>     * @throws {String} If the given operator is not in this field
<span class='linenumber'>303</span>     * @return {Ext.ux.netbox.core.ElementaryFilter} The elementaryFilter's instance
<span class='linenumber'>304</span>     */</span><span class="WHIT">
<span class='linenumber'>305</span>   </span><span class="NAME">getElementaryFilterInstance</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>306</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.ElementaryFilter</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">operator</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>307</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">filter</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>308</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>309</span>   </span><span class="COMM">/** This method returns the id of this Field.
<span class='linenumber'>310</span>     * @return {String} the id of this Field
<span class='linenumber'>311</span>     */</span><span class="WHIT">
<span class='linenumber'>312</span>   </span><span class="NAME">getId</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>313</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>314</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>315</span>   </span><span class="COMM">/** This method returns the label of this Field.
<span class='linenumber'>316</span>     * @return {String} the label of this Field
<span class='linenumber'>317</span>     */</span><span class="WHIT">
<span class='linenumber'>318</span>   </span><span class="NAME">getLabel</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>319</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.label</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>320</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>321</span>   </span><span class="COMM">/** This method returns a string rendering the value. It's used when the operator doesn't provide a specialized implementation.
<span class='linenumber'>322</span>     * In this default implementation it returns:
<span class='linenumber'>323</span>     * &lt;PRE>
<span class='linenumber'>324</span>     *       Condition                Returns
<span class='linenumber'>325</span>     *----------------------         ---------
<span class='linenumber'>326</span>     * is undefined or null          Empty String
<span class='linenumber'>327</span>     * array with length 0           Empty String
<span class='linenumber'>328</span>     * array with length > 0         The return of this function called on the the values of the array concatenated using ","
<span class='linenumber'>329</span>     * object with the label         this function called on value.label
<span class='linenumber'>330</span>     * and the value fields
<span class='linenumber'>331</span>     * something else                String(value)
<span class='linenumber'>332</span>     * &lt;/PRE>
<span class='linenumber'>333</span>     * @param {Object} value The value to render
<span class='linenumber'>334</span>     * @param {String} operatorId The id of the operator in the Filter
<span class='linenumber'>335</span>     * @return {String} the HTML fragment used to render the value of the Filter
<span class='linenumber'>336</span>     */</span><span class="WHIT">
<span class='linenumber'>337</span>   </span><span class="NAME">render</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>338</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">!==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>339</span>       </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Ext.type</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="STRN">"array"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>340</span>         </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rendered</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>341</span>         </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">value.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>342</span>           </span><span class="NAME">rendered.push</span><span class="PUNC">(</span><span class="NAME">this.render</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>343</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>344</span>         </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">rendered.join</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>345</span>       </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>346</span>         </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">value.value</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">value.label</span><span class="PUNC">!==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>347</span>           </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.render</span><span class="PUNC">(</span><span class="NAME">value.label</span><span class="PUNC">,</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>348</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>349</span>         </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">String</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>350</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>351</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>352</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>353</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>354</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>355</span>   </span><span class="COMM">/** This method creates the editor for the grid when the operator doesn't provide a specialized implementation.
<span class='linenumber'>356</span>     * In this default implementation it simply returns an Ext.ux.netbox.core.AvailableValuesEditor (ie a ComboBox) if there are availble values
<span class='linenumber'>357</span>     * or a Ext.ux.netbox.core.TextValuesEditor (ie a TextField) otherwise.
<span class='linenumber'>358</span>     * @param {String} operatorId The operatorId actually used in the filter
<span class='linenumber'>359</span>     * @return {Ext.Editor} The field used to edit the values of this filter
<span class='linenumber'>360</span>     */</span><span class="WHIT">
<span class='linenumber'>361</span>   </span><span class="NAME">createEditor</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">operatorId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>362</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">editor</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>363</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.isAvailableValuesAvailable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>364</span>       </span><span class="NAME">editor</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.TextValuesEditor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>365</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>366</span>       </span><span class="NAME">editor</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Ext.ux.netbox.core.AvailableValuesEditor</span><span class="PUNC">(</span><span class="NAME">this.getAvailableValues</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">remote</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.isStoreRemote</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">forceReload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.isForceReload</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">caseSensitive</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.isCaseSensitive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>367</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>368</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">editor</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>369</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>370</span>   </span><span class="COMM">/** This method sets the function used to validate the values on the field. Example of usage:
<span class='linenumber'>371</span>     * &lt;PRE>
<span class='linenumber'>372</span>     * var myValidateFunction=function(valuesArray){
<span class='linenumber'>373</span>     *   if(valuesArray.length > 0){
<span class='linenumber'>374</span>     *     if(valuesArray[0].value > 1)
<span class='linenumber'>375</span>     *       return true;
<span class='linenumber'>376</span>     *     else
<span class='linenumber'>377</span>     *       return "The value is too small";
<span class='linenumber'>378</span>     *   }else{
<span class='linenumber'>379</span>     *     return "The value is required";
<span class='linenumber'>380</span>     *   }
<span class='linenumber'>381</span>     * };
<span class='linenumber'>382</span>     * field.setValidateFn(myValidateFunction);
<span class='linenumber'>383</span>     * &lt;/PRE>
<span class='linenumber'>384</span>     * @param {function} func The function used to validate the values on the field. This function has only the value of the filter as parameter
<span class='linenumber'>385</span>     */</span><span class="WHIT">
<span class='linenumber'>386</span>   </span><span class="NAME">setValidateFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">func</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>387</span>     </span><span class="NAME">this.validateFunc</span><span class="PUNC">=</span><span class="NAME">func</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>388</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>389</span>   </span><span class="COMM">/** This method calls the validation function provided for the field. If none is supplied returns always true.
<span class='linenumber'>390</span>     * @param {Array} values The values to be validated
<span class='linenumber'>391</span>     * @return {boolean} true if the values are valid
<span class='linenumber'>392</span>     * @return {String} the message returned by the custom validator if the values are not valid
<span class='linenumber'>393</span>     */</span><span class="WHIT">
<span class='linenumber'>394</span>   </span><span class="NAME">validate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">values</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>395</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.validateFunc</span><span class="PUNC">!==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>396</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.validateFunc.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">values</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>397</span>     </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>398</span>       </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>399</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>400</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>401</span> 
<span class='linenumber'>402</span>   </span><span class="COMM">/** Function to use as validator if an empty value is not allowed
<span class='linenumber'>403</span>     * &lt;h4> Example&lt;/h4>
<span class='linenumber'>404</span>     * &lt;pre>
<span class='linenumber'>405</span>     * field.setValidateFn(field.emptyNotAllowedFn);
<span class='linenumber'>406</span>     * &lt;/pre>
<span class='linenumber'>407</span>     */</span><span class="WHIT">
<span class='linenumber'>408</span>   </span><span class="NAME">emptyNotAllowedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>409</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>410</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.emptyNotAllowed</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>411</span>     </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">value.length</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>412</span>       </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">this.emptyNotAllowed</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>413</span>     </span><span class="KEYW">return</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>414</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>415</span>    </span><span class="COMM">/** Text to show when the field is empty and this is not allowed
<span class='linenumber'>416</span>     */</span><span class="WHIT">
<span class='linenumber'>417</span>   </span><span class="NAME">emptyNotAllowed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Empty value not allowed"</span><span class="WHIT">
<span class='linenumber'>418</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>